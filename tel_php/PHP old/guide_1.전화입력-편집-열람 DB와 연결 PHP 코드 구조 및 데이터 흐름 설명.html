<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì§ì§€35 ì „í™”ì…ë ¥/í¸ì§‘/ì—´ëŒ DBì™€ ì—°ê²°</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    line-height: 1.6;
    padding: 20px;
    background: #f5f5f5;
  }
  h1, h2, h3 {
    color: #2c3e50;
  }
  h1 { font-size: 2rem; margin-bottom: 10px; }
  h2 { font-size: 1.5rem; margin-top: 30px; }
  h3 { font-size: 1.2rem; margin-top: 20px; }
  code {
    background: #eee;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9rem;
  }
  pre {
    background: #eee;
    padding: 10px;
    border-radius: 6px;
    overflow-x: auto;
  }
  .flowchart {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 30px;
  }
  .flow-step {
    background: #3498db;
    color: #fff;
    padding: 15px 25px;
    border-radius: 8px;
    margin: 15px 0;
    width: 250px;
    text-align: center;
    position: relative;
  }
  .arrow {
    width: 0; 
    height: 0; 
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 15px solid #2c3e50;
    margin: -5px 0 10px 0;
  }
  .container {
    max-width: 1000px;
    margin: 0 auto;
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .note {
    background: #fef3c7;
    border-left: 5px solid #f59e0b;
    padding: 10px 15px;
    margin: 10px 0 20px 0;
  }
</style>
</head>
<body>

<div class="container">
  <h1>ì „í™”ì…ë ¥/í¸ì§‘/ì—´ëŒ DBì™€ ì—°ê²° PHP ì½”ë“œ êµ¬ì¡° ë° ë°ì´í„° íë¦„ ì„¤ëª…</h1>

  <h2> - íšŒì¥,ì´ë¬´ ì¼ê²½ìš° sms_2 ==> ê±°ì£¼ì§€(addr) ëª¨ë“ íšŒì› ì „í™”ë²ˆí˜¸ ë§í¬ê±¸ê¸°(ë‹¨ì²´ ë¬¸ìë©”ì‹œì§€ìš©)</h2>  
  <h2>1ï¸âƒ£ ê´€ë¦¬ì ì¸ì¦ ë° DB ì—°ê²°</h2>
  <p>
    <code>auth_check.php</code>ë¥¼ í†µí•´ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ê´€ë¦¬ì ê¶Œí•œì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.<br>
    <code>db-connect-pdo.php</code>ë¥¼ í†µí•´ MySQL ë°ì´í„°ë² ì´ìŠ¤ì™€ <strong>PDO</strong>ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.
  </p>

  <h2>2ï¸âƒ£ ì „ì²´ íšŒì› ì „í™”ë²ˆí˜¸ ë¯¸ë¦¬ ì¡°íšŒ</h2>
  <p>
    íšŒì› í…Œì´ë¸”ì—ì„œ ëª¨ë“  ì „í™”ë²ˆí˜¸ë¥¼ ì¡°íšŒí•˜ê³  ë°°ì—´ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì´ ë°°ì—´ì€ <strong>íšŒì¥/ì´ë¬´ SMS_2</strong>ë¥¼ ì‹¤ì‹œê°„ ìƒì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
  </p>
  <pre>
$stmt_all_phones = $pdo-&gt;prepare("SELECT tel FROM tel WHERE tel != '' ORDER BY name ASC");
$stmt_all_phones-&gt;execute();
$all_phone_numbers = $stmt_all_phones-&gt;fetchAll(PDO::FETCH_COLUMN);
  </pre>

  <h2>3ï¸âƒ£ HTML í…Œì´ë¸” êµ¬ì¡°</h2>
  <p>
    Bootstrapê³¼ CSSë¥¼ ì‚¬ìš©í•˜ì—¬ ë°˜ì‘í˜• í…Œì´ë¸”ê³¼ UIë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.<br>
    ì£¼ìš” ìš”ì†Œ:
    <ul>
      <li>ë¡œë”© í™”ë©´</li>
      <li>ì‹œê³„, íë¸Œ ì´ë¯¸ì§€, ë¹Œë³´ë“œ</li>
      <li>íšŒì› í…Œì´ë¸”</li>
      <li>í‘¸í„° ë° 'ë§¨ ìœ„ë¡œ' ë²„íŠ¼</li>
    </ul>
  </p>

  <h2>4ï¸âƒ£ íšŒì› í…Œì´ë¸” ì¶œë ¥ ê³¼ì •</h2>
  <pre>
$stmt = $pdo-&gt;prepare("SELECT * FROM tel WHERE id != '' ORDER BY name ASC");
$stmt-&gt;execute();
$count = 1;

while ($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)) {
    // ì´ë¦„, ì „í™”ë²ˆí˜¸, ê±°ì£¼ì§€, ë¹„ê³ , SMS ë§í¬ ê°€ì ¸ì˜¤ê¸°
    $name = htmlspecialchars($row['name'], ENT_QUOTES, 'UTF-8');
    $tel_link = htmlspecialchars($row['tel'], ENT_QUOTES, 'UTF-8');
    $addr = htmlspecialchars($row['addr'], ENT_QUOTES, 'UTF-8');
    $remark = htmlspecialchars($row['remark'], ENT_QUOTES, 'UTF-8');
    $sms_link = htmlspecialchars($row['sms'], ENT_QUOTES, 'UTF-8');

    // í…Œì´ë¸” í–‰ ì¶œë ¥
}
  </pre>

  <h2>5ï¸âƒ£ íšŒì¥/ì´ë¬´ SMS_2 ì‹¤ì‹œê°„ ìƒì„±</h2>
  <p>
    <strong>remark</strong> ì»¬ëŸ¼ì— 'íšŒì¥' ë˜ëŠ” 'ì´ë¬´'ê°€ ìˆìœ¼ë©´,
    ìê¸° ì „í™”ë²ˆí˜¸ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì „í™”ë²ˆí˜¸ë¥¼ ì‰¼í‘œë¡œ ì—°ê²°í•˜ì—¬ SMS_2 ë§í¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  </p>
  <pre>
if (strpos($remark, 'íšŒì¥') !== false || strpos($remark, 'ì´ë¬´') !== false) {
    $filtered_phones = array_filter($all_phone_numbers, function($phone) use ($tel_link) {
        return $phone !== $tel_link;
    });
    $realtime_sms_2 = implode(',', $filtered_phones);
    echo "&lt;td&gt;&lt;a href='sms:{$realtime_sms_2}'&gt;{$addr}&lt;/a&gt;&lt;/td&gt;";
} else {
    echo "&lt;td&gt;{$addr}&lt;/td&gt;";
}
  </pre>

  <h2>6ï¸âƒ£ ë‚˜ë¨¸ì§€ ì—´</h2>
  <p>
    ë¹„ê³ , SMS ì•„ì´ì½˜ ë§í¬ ë“±ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
  </p>

  <h2>7ï¸âƒ£ ë°ì´í„° íë¦„ ìš”ì•½</h2>
  <ul>
    <li>DB ì—°ê²° &amp; ê´€ë¦¬ì ì¸ì¦</li>
    <li>ì „ì²´ ì „í™”ë²ˆí˜¸ ë°°ì—´ ìƒì„±</li>
    <li>íšŒì› ì •ë³´ ì¡°íšŒ</li>
    <li>ë°˜ë³µë¬¸ìœ¼ë¡œ í…Œì´ë¸”ì— í–‰ ì¶œë ¥</li>
    <li>íšŒì¥/ì´ë¬´ëŠ” SMS_2 ì‹¤ì‹œê°„ ìƒì„±</li>
    <li>ì¼ë°˜ íšŒì›ì€ ê±°ì£¼ì§€/ì „í™”ë²ˆí˜¸/ë¹„ê³ /ê¸°ì¡´ SMS ë§í¬ ì¶œë ¥</li>
  </ul>

  <h2>8ï¸âƒ£ íë¦„ë„ ê·¸ë¦¼</h2>
  <div class="flowchart">
    <div class="flow-step">1. ê´€ë¦¬ì ì¸ì¦ &amp; DB ì—°ê²°</div>
    <div class="arrow"></div>
    <div class="flow-step">2. ì „ì²´ íšŒì› ì „í™”ë²ˆí˜¸ ì¡°íšŒ</div>
    <div class="arrow"></div>
    <div class="flow-step">3. íšŒì› ì •ë³´ SELECT ì¡°íšŒ</div>
    <div class="arrow"></div>
    <div class="flow-step">4. while ë°˜ë³µ â†’ í…Œì´ë¸” í–‰ ìƒì„±</div>
    <div class="arrow"></div>
    <div class="flow-step">5. íšŒì¥/ì´ë¬´ SMS_2 ì‹¤ì‹œê°„ ìƒì„±</div>
    <div class="arrow"></div>
    <div class="flow-step">6. HTML í…Œì´ë¸”ì— ì¶œë ¥ ì™„ë£Œ</div>
  </div>

  <div class="note">
    ğŸ’¡ ìš”ì•½: ì´ êµ¬ì¡° ë•ë¶„ì— í˜ì´ì§€ë¥¼ ì—´ ë•Œë§ˆë‹¤ <strong>ìµœì‹  íšŒì› ì •ë³´ ë°˜ì˜</strong> ë° <strong>íšŒì¥/ì´ë¬´ SMS_2 ì‹¤ì‹œê°„ ìƒì„±</strong>ì´ ê°€ëŠ¥í•˜ë©°, DBì—ëŠ” ë¶ˆí•„ìš”í•œ ì—…ë°ì´íŠ¸ë¥¼ í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
  </div>

<h1>tel_input.php ê¸°ëŠ¥ & íë¦„ ì •ë¦¬</h1>

<div class="step">
  <h4>1ï¸âƒ£ ê´€ë¦¬ì ì¸ì¦ ë° DB ì—°ê²°</h4>
  <p>
    <strong>auth_check.php</strong>ë¡œ ë¡œê·¸ì¸ + ê´€ë¦¬ì í™•ì¸ í›„, <strong>db-connect-pdo.php</strong>ë¥¼ í†µí•´ DB ì—°ê²° ìˆ˜í–‰.
    <br>SMS_2 ìë™ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ëŠ” <strong>update_leaders_sms2.php</strong>ì— ì •ì˜ë˜ì–´ ìˆìŒ.
  </p>
</div>

<div class="step">
  <h4>2ï¸âƒ£ íšŒì› ì…ë ¥ ì²˜ë¦¬ (POST)</h4>
  <ul>
    <li>ì‚¬ìš©ì ì…ë ¥ê°’ ìˆ˜ì§‘ (id, password, name, tel, addr, remark, sms, sms_2, user_level)</li>
    <li>ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (password_hash)</li>
    <li><strong>íšŒì¥/ì´ë¬´ ìë™ SMS_2 ìƒì„±</strong>  
      - í˜„ì¬ ë“±ë¡ ì¤‘ì¸ ì „í™”ë²ˆí˜¸ ì œì™¸  
      - ë‚¨ì€ ë²ˆí˜¸ë“¤ì„ ì½¤ë§ˆë¡œ ì—°ê²°í•˜ì—¬ SMS_2 ìƒì„±
    </li>
    <li>DBì— ì‹ ê·œ íšŒì› ì‚½ì…</li>
    <li>ê¸°ì¡´ íšŒì¥/ì´ë¬´ SMS_2 ìë™ ê°±ì‹ </li>
    <li>updateLeadersSms2($pdo) í˜¸ì¶œ: ì „ì²´ íšŒì¥/ì´ë¬´ SMS_2 ìµœì‹ í™”</li>
    <li>ì €ì¥ ì™„ë£Œ í›„ ì•Œë¦¼ ë° ëª©ë¡í˜ì´ì§€ ì´ë™</li>
  </ul>
</div>

<div class="step">
  <h4>3ï¸âƒ£ ì‹¤ì‹œê°„ SMS_2 ìƒì„± ì•ˆë‚´ (í”„ë¡ íŠ¸ì—”ë“œ)</h4>
  <p>
    ë¹„ê³  ì…ë ¥ë€ì—ì„œ "íšŒì¥" ë˜ëŠ” "ì´ë¬´" ì…ë ¥ ì‹œ, í¼ì—ì„œ SMS_2 í•„ë“œê°€ ì½ê¸°ì „ìš©ìœ¼ë¡œ ë°”ë€Œê³  ì•ˆë‚´ í…ìŠ¤íŠ¸ í‘œì‹œ.
    <br>DB ì €ì¥ ì‹œ ìë™ìœ¼ë¡œ ìƒì„±ëœ SMS_2ê°€ ì‚½ì…ë¨.
  </p>
</div>

<div class="step">
  <h4>4ï¸âƒ£ í•µì‹¬ íë¦„ë„</h4>
  <div class="flowchart">
<pre>
[ê´€ë¦¬ì ì¸ì¦]
       â”‚
       â–¼
   [DB ì—°ê²°]
       â”‚
       â–¼
[íšŒì› ì…ë ¥ í¼ ì œì¶œ?] --No--> [í¼ í™”ë©´ í‘œì‹œ]
       â”‚Yes
       â–¼
[ì…ë ¥ê°’ ìˆ˜ì§‘ + ë¹„ë°€ë²ˆí˜¸ í•´ì‹±]
       â”‚
       â–¼
[ë¹„ê³  í™•ì¸: íšŒì¥/ì´ë¬´?] --Yes--> [ìë™ SMS_2 ìƒì„±]
       â”‚
       â–¼
[ì‹ ê·œ íšŒì› DB ì‚½ì…]
       â”‚
       â–¼
[ê¸°ì¡´ íšŒì¥/ì´ë¬´ SMS_2 ìë™ ì—…ë°ì´íŠ¸]
       â”‚
       â–¼
[updateLeadersSms2($pdo) í˜¸ì¶œ]
       â”‚
       â–¼
[ì €ì¥ ì™„ë£Œ ì•Œë¦¼ & ëª©ë¡í˜ì´ì§€ ì´ë™]
</pre>
  </div>
  <p>ì´ íë¦„ìœ¼ë¡œ ì¸í•´, ì‹¤ì‹œê°„ ìƒì„± + DB ìë™ ì—…ë°ì´íŠ¸ê°€ ë™ì‹œì— ì‘ë™í•˜ë©°, tel_view.phpì—ì„œ ìµœì‹  ì •ë³´ í™•ì¸ ê°€ëŠ¥.</p>
</div>

<div class="step">
  <h4>5ï¸âƒ£ í•µì‹¬ í¬ì¸íŠ¸</h4>
  <ul>
    <li>ë””ìì¸ì€ ì™„ì „íˆ ìœ ì§€ë¨</li>
    <li>íšŒì¥/ì´ë¬´ëŠ” SMS_2 ìë™ ìƒì„±</li>
    <li>ê¸°ì¡´ íšŒì¥/ì´ë¬´ SMS_2ë„ í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€</li>
    <li>ì‹¤ì‹œê°„ ìƒì„± ì•ˆë‚´ëŠ” ì‚¬ìš©ìì—ê²Œ ì§ê´€ì ìœ¼ë¡œ ë³´ì—¬ì§</li>
  </ul>
</div>

</div>


</div>
</body>
</html>



