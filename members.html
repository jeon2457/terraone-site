<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëª©ë¡í¸ì§‘</title>

  <!-- íŒŒë¹„ì½˜ -->
  <link rel="icon" href="./favicons/favicon.png?v=2" />
  <link rel="icon" type="image/png" sizes="36x36" href="./favicons/android-icon-36x36.png" />
  <link rel="icon" type="image/png" sizes="48x48" href="./favicons/android-icon-48x48.png" />
  <link rel="icon" type="image/png" sizes="72x72" href="./favicons/android-icon-72x72.png" />
  <link rel="apple-touch-icon" sizes="32x32" href="./favicons/apple-icon-32x32.png">
  <link rel="apple-touch-icon" sizes="57x57" href="./favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="./favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="./favicons/apple-icon-72x72.png">


  <!-- ì›¹ì‚¬ì´íŠ¸ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ -->
  <link rel="manifest" href="./manifest.json" />

  <!-- Msë¸Œë¼ìš°ì € ì„¤ì • íŒŒì¼ -->
  <meta name="msapplication-config" content="./browserconfig.xml" />
  <meta name="msapplication-TileColor" content="#ffffff" />
  <meta name="msapplication-TileImage" content="./ms-icon-144x144.png" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- ì‚¬ìš©ì ì •ì˜ CSS -->
  <link rel="stylesheet" href="./css_firebase/members.css">

  <!-- JS ëª¨ë“ˆ -->
  <script type="module" src="./js/members.js" defer></script>

  <style>
    #logoutBtn{
      color: white;
    }

    /* ê¸°ì¡´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn-back {
      display: block;
      width: 200px;
      margin: 25px auto 20px auto;
      padding: 12px 20px;
      border-radius: 12px;
      background: #667eea;
      color: #fff;
      font-weight: 700;
      text-align: center;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .btn-back:hover {
      background: #556cd6;
      text-decoration: none;
      color: #fff;
    }

    /* âœ… [ì¶”ê°€] ìœ„ë¡œ ì´ë™ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    #btnScrollToTop {
      display: none;
      position: fixed;
      bottom: 5px;   /* ìš”ì²­í•˜ì‹  ìœ„ì¹˜ ìœ ì§€ */
      right: 10px;   /* ìš”ì²­í•˜ì‹  ìœ„ì¹˜ ìœ ì§€ */
      z-index: 999;
      border: none;
      outline: none;
      background-color: #667eea;
      color: white;
      cursor: pointer;
      
      /* ğŸ”¥ ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•œ ìˆ˜ì • ë¶€ë¶„ ğŸ”¥ */
      padding: 0;          /* ì—¬ë°± ì œê±° (ì¤‘ìš”) */
      width: 40px;
      height: 40px;
      line-height: 40px;   /* ë†’ì´ì™€ ë˜‘ê°™ì´ ì„¤ì •í•˜ë©´ ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ë¨ */
      text-align: center;  /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
      /* --------------------------- */

      border-radius: 50%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: background-color 0.3s, transform 0.3s;
      font-weight: bold;
      font-size: 20px;
    }

    #btnScrollToTop:hover {
      background-color: #556cd6;
      transform: translateY(-5px);
    }

    
  </style>

</head>
<body>
  <div class="container mt-5">
    <!-- ğŸ”¥ ìƒë‹¨ í—¤ë” (ë¡œê·¸ì¸ ì •ë³´ + ë¡œê·¸ì•„ì›ƒ) -->
    <div class="d-flex justify-content-center align-items-center mb-4">
      <h2 class="mb-0">íšŒì› ì „ì²´ ëª©ë¡</h2>
    </div>

      <span id="userInfo" class="me-3"></span>
      <button id="logoutBtn" class="btn btn-outline-secondary btn-sm">ë¡œê·¸ì•„ì›ƒ</button>
  </div>
   

    <div class="mb-3 mt-3 text-end btn-area-responsive">
      <!-- âœ… íšŒì›ê´€ë¦¬ ë²„íŠ¼ë“¤ -->
      <button id="signupSelected" class="btn btn-success me-2">íšŒì›ê°€ì…</button>
      <button id="adminManage" class="btn btn-dark me-2">íšŒê³„/ì˜ìˆ˜ì¦</button>
      <button id="viewSelected" class="btn btn-primary me-2">íšŒì›ì—´ëŒ</button>
      <button id="editSelected" class="btn btn-warning me-2">ì„ íƒíšŒì› ìˆ˜ì •</button>
      <button id="deleteSelected" class="btn btn-danger">ì„ íƒíšŒì› ì‚­ì œ</button>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-hover" id="membersTable">
        <thead class="table-dark">
          <tr>
            <th><input type="checkbox" id="selectAll"></th>
            <th>ë²ˆí˜¸</th>
            <th>ì•„ì´ë””</th>
            <th>ì´ë¦„</th>
            <th>ì „í™”ë²ˆí˜¸</th>
            <th>ì£¼ì†Œ</th>
            <th>ë¹„ê³ </th>
            <th>SMS</th>
            <th>SMS ì¶”ê°€</th>
            <th>ë ˆë²¨</th>
          </tr>
        </thead>
        <tbody>
          <!-- ì—¬ê¸°ì— íšŒì› ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </tbody>
      </table>
    </div>

    <div id="message" class="mt-3 text-center"></div>

    <!-- âœ… [ì¶”ê°€] ìœ„ë¡œ ì´ë™ ë²„íŠ¼ (í™”ì‚´í‘œ ì•„ì´ì½˜) -->
    <button id="btnScrollToTop" title="ë§¨ ìœ„ë¡œ ì´ë™">â¬†</button>

  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- ğŸ”¥ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ -->
  <script type="module">
    import { logout, getCurrentUser } from "./js/auth.js";
    
    const logoutBtn = document.getElementById("logoutBtn");
    const userInfo = document.getElementById("userInfo");
    
    const user = getCurrentUser();
    if (user) {
      userInfo.textContent = `ğŸ‘‹ ${user.name}ë‹˜ (ê´€ë¦¬ì)`;
    }
    
    logoutBtn.addEventListener("click", () => {
      if (confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        logout();
      }
    });
  </script>

  <script>
    // ğŸ”¥ íšŒì›ê´€ë¦¬ ë²„íŠ¼ í´ë¦­ â†’ admin_firebase.html ì´ë™
    document.getElementById("adminManage").addEventListener("click", () => {
      window.location.href = "admin_firebase.html";
    });

    // ==========================================
    // âœ… [ì¶”ê°€] ìœ„ë¡œ ì´ë™ ìŠ¤í¬ë¦½íŠ¸ (1.5ì´ˆ ì• ë‹ˆë©”ì´ì…˜)
    // ==========================================
    
    const btnScrollToTop = document.getElementById("btnScrollToTop");

    // 1. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì— ë”°ë¼ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
    window.onscroll = function() {
      if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
        btnScrollToTop.style.display = "block";
      } else {
        btnScrollToTop.style.display = "none";
      }
    };

    // 2. ë²„íŠ¼ í´ë¦­ ì‹œ ë¶€ë“œëŸ½ê²Œ ìœ„ë¡œ ì´ë™ (1500ms)
    btnScrollToTop.addEventListener("click", function() {
      scrollToTop(1500); // 1.5ì´ˆ
    });

    // 3. ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
    function scrollToTop(duration) {
      const start = window.scrollY;
      const startTime = performance.now();

      function scroll(currentTime) {
        const timeElapsed = currentTime - startTime;
        const progress = Math.min(timeElapsed / duration, 1); // 0 ~ 1 ì‚¬ì´ ê°’

        // ì´ì§• í•¨ìˆ˜ (Easing Function) - ë¶€ë“œëŸ¬ìš´ ê°ì† íš¨ê³¼ (Ease Out Quart)
        // ì²˜ìŒì— ë¹ ë¥´ë‹¤ê°€ ëì— ì²œì²œíˆ ë©ˆì¶¤
        const ease = 1 - Math.pow(1 - progress, 4);

        window.scrollTo(0, start * (1 - ease));

        if (timeElapsed < duration) {
          requestAnimationFrame(scroll);
        }
      }

      requestAnimationFrame(scroll);
    }
  </script>

</body>
</html>