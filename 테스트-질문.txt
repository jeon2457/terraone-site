



(ì±—GPT ì§ˆë¬¸ë‚´ìš©)
https://claude.ai/chat/

í˜„ì¬ ì›¹í˜ì´ì§€ê°€ êµ¬ê¸€ì˜ firebaseì™€ Realtime Databaseë¡œ ì—°ë™ë˜ì„œ ê°€ë™ì¤‘ì¸ë° í˜ì´ì§€ ë‚´ìš©ì€ ë¡œê·¸ì¸(ì†ë‹˜ì ‘ê·¼ì°¨ë‹¨,ê´€ë¦¬ìëª¨ë“œë¡œ ê²€ì¦í†µê³¼), ë“±ë¡íšŒì› ë°ì´íƒ€í¸ì§‘, ê¸ˆì „ì¶œë‚©ë¶€(ë°ì´íƒ€ ì…ë ¥, í¸ì§‘,ë³´ê¸°) ì´ë¯¸ì§€(ì…ë ¥, í¸ì§‘, ë³´ê¸°) ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ë„£ê³  ì‚¬ìš©í•˜ê³ ìˆëŠ”ë° ë¬¸ì œëŠ”, ì´ ë°ì´íƒ€ë“¤ì„ ê¹ƒí—ˆë¸Œì— ì˜¬ë ¤ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë‹ˆ ì¼ë°˜ HTMLì´ ì•„ë‹ˆë¼ íŠ¹ìˆ˜í•œí˜•íƒœì˜ HTMLë°©ì‹ê³¼ ë°ì´íƒ€ë² ì´ìŠ¤ë¥¼ ì—°ë™ ì‹œì¼œì„œ ë˜ì§€ë¥¼ ì•Šì•„ìš”.  ì½”ë“œì—ìˆëŠ” ê²½ë¡œë¥¼ ìƒëŒ€ê²½ë¡œê°€ ì•„ë‹Œ ì ˆëŒ€ê²½ë¡œë¡œ ë³€ê²½í•´ë„ ê¹ƒí—ˆë¸Œì—ì„œëŠ” ë¶ˆê°€ëŠ¥í•œ ê±´ê°€ìš”? ë”°ë¡œ ë°©ë²•ì´ ì—†ì„ê¹Œìš”?


https://terraone-d0318.web.app/images_edit.html ì´ í˜ì´ì§€ë„ ë””ìì¸ì„ ë¶„ì„ì„ í•´ì¤˜ìš”.
ë‹¤ìŒì°¨ë¡€ì— images_edit.php ì½”ë“œë¥¼ ë³´ë‚¼í…Œë‹ˆ images_edit.html ê³¼ ë˜‘ê°™ì€ ë””ìì¸ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜ìš”.  

https://terraone-d0318.web.app/images_view.html ì´ í˜ì´ì§€ë„ ë””ìì¸ì„ ë¶„ì„ì„ í•´ì¤˜ìš”.
ë‹¤ìŒì°¨ë¡€ì— images_view.php ì½”ë“œë¥¼ ë³´ë‚¼í…Œë‹ˆ images_view.html ê³¼ ë˜‘ê°™ì€ ë””ìì¸ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜ìš”.  




[ì§ˆë¬¸-1]

í˜„ì¬ ì›¹í˜ì´ì§€ê°€ êµ¬ê¸€ì˜ firebaseì™€ Realtime Databaseë¡œ ì—°ë™ë˜ì„œ ê°€ë™ì¤‘ì¸ë° í˜ì´ì§€ ì…ë‹ˆë‹¤. 
https://terraone-d0318.web.app/account_view.html 
ì•„ë˜ì˜ í˜ì´ì§€ êµ¬ì¡°ë¥¼ ì˜ ë¶„ì„í•´ì£¼ê¸°ë°”ëë‹ˆë‹¤.  ë¶€íƒí• ê±´ PHPíŒŒì¼ì„ í¸ì§‘í•´ë‹¬ë¼ê³  ê·¸ëŸ¬ëŠ”ë° ë‹¤ì‹œ 
ì½”ë“œë¥¼ ë³´ë‚´ì¤„ê»˜ìš”!

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‚¬ìš©ë‚´ì—­ì„œ ë³´ê¸°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --income-color: #4CAF50;
      --expense-color: #f44336;
    }
    
    body {
      background: var(--primary-gradient);
      min-height: 100vh;
      padding: 20px;
      font-family: 'Noto Sans KR', sans-serif;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header-card {
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      background: white;
      padding: 25px;
      margin-bottom: 20px;
    }
    
    .date-display {
      text-align: center;
      color: #667eea;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 20px;
    }
    
    .month-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 15px;
    }
    
    .btn-month {
      padding: 10px 20px;
      border-radius: 10px;
      border: 2px solid #e0e0e0;
      background: white;
      color: #666;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-month:hover {
      border-color: #667eea;
      color: #667eea;
    }
    
    .btn-month.active {
      background: var(--primary-gradient);
      color: white;
      border-color: transparent;
      transform: scale(1.05);
    }
    
    .alert-info {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border: none;
      border-radius: 12px;
      color: #1976d2;
    }
    
    .section-card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      padding: 25px;
      margin-bottom: 30px;
    }
    
    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 25px;
      color: #333;
    }
    
    .income-title {
      color: var(--income-color);
    }
    
    .expense-title {
      color: var(--expense-color);
    }
    
    .table-wrapper {
      overflow-x: auto;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .custom-table {
      margin: 0;
      background: white;
      border-radius: 12px;
      overflow: hidden;
    }
    
    .custom-table thead {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .custom-table thead th {
      padding: 15px;
      font-weight: 700;
      border: none;
      text-align: center;
    }
    
    .custom-table tbody td {
      padding: 12px;
      vertical-align: middle;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .custom-table tbody tr:last-child td {
      border-bottom: none;
    }
    
    .custom-table tbody tr:hover {
      background: #f8f9ff;
    }
    
    .amount-column {
      text-align: right;
      font-weight: 700;
      color: #333;
    }
    
    .summary-row {
      background: linear-gradient(135deg, #f8f9ff 0%, #e8eaf6 100%);
      font-weight: 700;
    }
    
    .summary-label-income {
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
      color: var(--income-color);
      font-weight: 700;
      text-align: center;
    }
    
    .summary-label-expense {
      background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      color: var(--expense-color);
      font-weight: 700;
      text-align: center;
    }
    
    .summary-value {
      font-size: 1.2rem;
      font-weight: 700;
      color: #667eea;
      text-align: center;
    }
    
    .balance-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      padding: 30px;
      color: white;
      text-align: center;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }
    
    .balance-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 15px;
      opacity: 0.9;
    }
    
    .balance-amount {
      font-size: 2.5rem;
      font-weight: 900;
      margin: 0;
    }
    
    .balance-positive {
      color: #4CAF50;
      text-shadow: 0 2px 10px rgba(76, 175, 80, 0.3);
    }
    
    .balance-negative {
      color: #f44336;
      text-shadow: 0 2px 10px rgba(244, 67, 54, 0.3);
    }
    
    .nav-buttons {
      display: flex;
      gap: 10px;
    }
    
    .btn-nav {
      flex: 1;
      padding: 15px;
      border-radius: 12px;
      border: none;
      background: white;
      color: #667eea;
      font-weight: 700;
      text-decoration: none;
      text-align: center;
      transition: all 0.3s;
      border: 2px solid white;
    }
    
    .btn-nav:hover {
      background: transparent;
      color: white;
      border-color: white;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px;
      color: #999;
    }
    
    @media (max-width: 768px) {
      .month-buttons {
        gap: 5px;
      }
      
      .btn-month {
        padding: 8px 15px;
        font-size: 0.9rem;
      }
      
      .balance-amount {
        font-size: 1.8rem;
      }
      
      .section-title {
        font-size: 1.4rem;
      }
      
      .custom-table {
        font-size: 0.85rem;
      }
      
      .custom-table thead th,
      .custom-table tbody td {
        padding: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-card">
      <div class="date-display" id="dateDisplay">ë¡œë”© ì¤‘...</div>
      
      <div class="month-buttons" id="monthButtons">
        <!-- ì›” ë²„íŠ¼ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
      </div>
      
      <div class="alert alert-info text-center" role="alert">
        ğŸ’¡ í•©ê³„ê°€ ì œëŒ€ë¡œ ë³´ì´ì§€ ì•Šìœ¼ë©´ ì›” ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!
      </div>
    </div>
    
    <!-- ìˆ˜ì… í…Œì´ë¸” -->
    <div class="section-card">
      <h3 class="section-title income-title">ğŸ“ˆ ìˆ˜ì… ëª©ë¡</h3>
      <div class="table-wrapper">
        <table class="table custom-table">
          <thead>
            <tr>
              <th style="width: 8%">No</th>
              <th style="width: 15%">ì¼ì</th>
              <th style="width: 35%">í•­ëª©</th>
              <th style="width: 27%">ë¹„ê³ </th>
              <th style="width: 15%">ê¸ˆì•¡</th>
            </tr>
          </thead>
          <tbody id="incomeTableBody">
            <tr>
              <td colspan="5" class="loading">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-2 mb-0">ë¡œë”© ì¤‘...</p>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr class="summary-row">
              <td colspan="2" class="summary-label-income">ì›”ìˆ˜ì… í•©ê³„</td>
              <td colspan="3" class="summary-value" id="monthlyIncomeTotal">0ì›</td>
            </tr>
            <tr class="summary-row">
              <td colspan="2" class="summary-label-income">ë…„ìˆ˜ì… í•©ê³„</td>
              <td colspan="3" class="summary-value" id="yearIncomeTotal">0ì›</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    
    <!-- ì§€ì¶œ í…Œì´ë¸” -->
    <div class="section-card">
      <h3 class="section-title expense-title">ğŸ“‰ ì§€ì¶œ ëª©ë¡</h3>
      <div class="table-wrapper">
        <table class="table custom-table">
          <thead>
            <tr>
              <th style="width: 8%">No</th>
              <th style="width: 15%">ì¼ì</th>
              <th style="width: 35%">í•­ëª©</th>
              <th style="width: 27%">ë¹„ê³ </th>
              <th style="width: 15%">ê¸ˆì•¡</th>
            </tr>
          </thead>
          <tbody id="expenseTableBody">
            <tr>
              <td colspan="5" class="loading">
                <div class="spinner-border text-danger" role="status"></div>
                <p class="mt-2 mb-0">ë¡œë”© ì¤‘...</p>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr class="summary-row">
              <td colspan="2" class="summary-label-expense">ì›”ì§€ì¶œ í•©ê³„</td>
              <td colspan="3" class="summary-value" id="monthlyExpenseTotal">0ì›</td>
            </tr>
            <tr class="summary-row">
              <td colspan="2" class="summary-label-expense">ë…„ì§€ì¶œ í•©ê³„</td>
              <td colspan="3" class="summary-value" id="yearExpenseTotal">0ì›</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    
    <!-- ì´ì”ì•¡ -->
    <div class="balance-card">
      <h3 class="balance-title">ğŸ’° ì´ì”ì•¡</h3>
      <h2 class="balance-amount" id="totalBalance">0ì›</h2>
      
      <div class="nav-buttons mt-4">
        <a href="account_input.html" class="btn-nav">â• ì…ë ¥í•˜ê¸°</a>
        <a href="account_edit.html" class="btn-nav">âœï¸ í¸ì§‘í•˜ê¸°</a>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getDatabase, ref, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

    // Firebase ì„¤ì •
    const firebaseConfig = {
        apiKey: "AIzaSyAF7AD1d54k21-stmb0Hpg9OMEECvzFHpQ",
        authDomain: "terraone-d0318.firebaseapp.com",
        databaseURL: "https://terraone-d0318-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "terraone-d0318",
        storageBucket: "terraone-d0318.appspot.com",   // â† ì´ ê°’ë§Œ ë‹¤ì‹œ í™•ì¸!
        messagingSenderId: "1082807340877",
        appId: "1:1082807340877:web:6e2b49c04562d800e87104",
        measurementId: "G-7HMJEV832S"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    // ì „ì—­ ë³€ìˆ˜
    let currentMonth = new Date().getMonth() + 1;
    const currentYear = new Date().getFullYear();
    let allIncomeData = [];
    let allExpenseData = [];

    // ë‚ ì§œ í‘œì‹œ
    function updateDateDisplay() {
      const now = new Date();
      const formatted = `${now.getFullYear()}/${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
      document.getElementById('dateDisplay').innerHTML = `ğŸ“… ì˜¤ëŠ˜ì˜ ë‚ ì§œ: ${formatted}`;
    }

    // ì›” ë²„íŠ¼ ìƒì„±
    function createMonthButtons() {
      const buttonsContainer = document.getElementById('monthButtons');
      let html = '';
      
      for (let month = 1; month <= 12; month++) {
        const activeClass = month === currentMonth ? 'active' : '';
        html += `<button class="btn-month ${activeClass}" onclick="selectMonth(${month})">${month}ì›”</button>`;
      }
      
      buttonsContainer.innerHTML = html;
    }

    // ì›” ì„ íƒ
    window.selectMonth = function(month) {
      currentMonth = month;
      createMonthButtons();
      updateDisplay();
    };

    // ë°ì´í„° ë¡œë“œ
    function loadData() {
      const incomeRef = ref(database, 'income_table');
      const expenseRef = ref(database, 'expense_table');

      onValue(incomeRef, (snapshot) => {
        const data = snapshot.val();
        allIncomeData = data ? Object.entries(data).map(([id, item]) => ({
          id,
          ...item
        })) : [];
        updateDisplay();
      });

      onValue(expenseRef, (snapshot) => {
        const data = snapshot.val();
        allExpenseData = data ? Object.entries(data).map(([id, item]) => ({
          id,
          ...item
        })) : [];
        updateDisplay();
      });
    }

    // í™”ë©´ ì—…ë°ì´íŠ¸
    function updateDisplay() {
      displayIncomeTable();
      displayExpenseTable();
      calculateTotals();
    }

    // ìˆ˜ì… í…Œì´ë¸” í‘œì‹œ
    function displayIncomeTable() {
      const tbody = document.getElementById('incomeTableBody');
      
      const filteredData = allIncomeData.filter(item => {
        const itemDate = new Date(item.date);
        return itemDate.getFullYear() === currentYear && 
               (itemDate.getMonth() + 1) === currentMonth;
      }).sort((a, b) => new Date(a.date) - new Date(b.date));
      
      if (filteredData.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="5" class="empty-state">
              <p>ì´ë²ˆ ë‹¬ ìˆ˜ì… ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            </td>
          </tr>
        `;
        return;
      }
      
      tbody.innerHTML = filteredData.map((item, index) => `
        <tr>
          <td style="text-align: center">${index + 1}</td>
          <td style="text-align: center">${item.date}</td>
          <td>${item.category}</td>
          <td>${item.description || '-'}</td>
          <td class="amount-column">${Number(item.amount).toLocaleString()}ì›</td>
        </tr>
      `).join('');
    }

    // ì§€ì¶œ í…Œì´ë¸” í‘œì‹œ
    function displayExpenseTable() {
      const tbody = document.getElementById('expenseTableBody');
      
      const filteredData = allExpenseData.filter(item => {
        const itemDate = new Date(item.date);
        return itemDate.getFullYear() === currentYear && 
               (itemDate.getMonth() + 1) === currentMonth;
      }).sort((a, b) => new Date(a.date) - new Date(b.date));
      
      if (filteredData.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="5" class="empty-state">
              <p>ì´ë²ˆ ë‹¬ ì§€ì¶œ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            </td>
          </tr>
        `;
        return;
      }
      
      tbody.innerHTML = filteredData.map((item, index) => `
        <tr>
          <td style="text-align: center">${index + 1}</td>
          <td style="text-align: center">${item.date}</td>
          <td>${item.category}</td>
          <td>${item.description || '-'}</td>
          <td class="amount-column">${Number(item.amount).toLocaleString()}ì›</td>
        </tr>
      `).join('');
    }

    // í•©ê³„ ê³„ì‚°
    function calculateTotals() {
      // ì›”ë³„ í•©ê³„
      let monthlyIncome = 0;
      let monthlyExpense = 0;
      
      allIncomeData.forEach(item => {
        const itemDate = new Date(item.date);
        if (itemDate.getFullYear() === currentYear && 
            (itemDate.getMonth() + 1) === currentMonth) {
          monthlyIncome += Number(item.amount);
        }
      });
      
      allExpenseData.forEach(item => {
        const itemDate = new Date(item.date);
        if (itemDate.getFullYear() === currentYear && 
            (itemDate.getMonth() + 1) === currentMonth) {
          monthlyExpense += Number(item.amount);
        }
      });
      
      // ë…„ í•©ê³„ (ì„ íƒí•œ ì›”ê¹Œì§€)
      let yearIncome = 0;
      let yearExpense = 0;
      
      allIncomeData.forEach(item => {
        const itemDate = new Date(item.date);
        if (itemDate.getFullYear() === currentYear && 
            (itemDate.getMonth() + 1) <= currentMonth) {
          yearIncome += Number(item.amount);
        }
      });
      
      allExpenseData.forEach(item => {
        const itemDate = new Date(item.date);
        if (itemDate.getFullYear() === currentYear && 
            (itemDate.getMonth() + 1) <= currentMonth) {
          yearExpense += Number(item.amount);
        }
      });
      
      // ì´ì”ì•¡
      const balance = yearIncome - yearExpense;
      
      // í™”ë©´ì— í‘œì‹œ
      document.getElementById('monthlyIncomeTotal').textContent = 
        monthlyIncome.toLocaleString() + 'ì›';
      document.getElementById('yearIncomeTotal').textContent = 
        yearIncome.toLocaleString() + 'ì›';
      document.getElementById('monthlyExpenseTotal').textContent = 
        monthlyExpense.toLocaleString() + 'ì›';
      document.getElementById('yearExpenseTotal').textContent = 
        yearExpense.toLocaleString() + 'ì›';
      
      const balanceElement = document.getElementById('totalBalance');
      balanceElement.textContent = balance.toLocaleString() + 'ì›';
      
      if (balance >= 0) {
        balanceElement.className = 'balance-amount balance-positive';
      } else {
        balanceElement.className = 'balance-amount balance-negative';
      }
    }

    // ì´ˆê¸°í™”
    updateDateDisplay();
    createMonthButtons();
    loadData();
  </script>
</body>
</html>








â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£




[ì§ˆë¬¸-2]

ë‚´ê°€ ì§€ê¸ˆ ë¶€íƒí•˜ë ¤ëŠ”ê±´ ë˜‘ê°™ì€ ì„±ê²©ì˜ ê¸ˆì „ì¶œë‚©ë¶€ ê°™ì€ ì‚¬ìš©ë‚´ì—­ì„œë¼ëŠ” ì½”ë“œì¸ë° ì´ê±´ PHPì½”ë“œì™€ MySql DBì™€ ì—°ë™ë˜ì–´ ê°€ë™ë˜ëŠ” ì½”ë“œëë‹ˆë‹¤. ì´ ì½”ë“œë¥¼ ë°ì´íƒ€ ìˆ˜ì •ì„í•´ì„œ ì¢€ ì „ì— ë‚´ê°€ë³´ë‚´ì¤€ account_view.htmlê°€ ê±°ì˜ ë˜‘ê°™ì€ ë””ìì¸ìœ¼ë¡œ ë°”ê¿”ë‹¬ë¼ëŠ” ê²ë‹ˆë‹¤. ê°€ëŠ¥í• ê¹Œìš”? 
[[ account_view.php ì½”ë“œ ]] <!DOCTYPE html> <html lang="ko"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="J.S.J" /> <title>ì‚¬ìš©ë‚´ì—­ì„œë³´ê¸°</title> <link rel="stylesheet" href="css/account_view.css" /> <link rel="manifest" href="manifest.json"> <meta name="msapplication-config" content="/browserconfig.xml"> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="theme-color" content="#ffffff"> <!-- Bootstrap CSS (5.3.3) --> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> <!-- íŒŒë¹„ì½˜ ì•„ì´ì½˜ë“¤ --> <link rel="icon" href="/favicon.ico?v=2" /> <link rel="icon" type="image/png" sizes="36x36" href="/favicons/android-icon-36x36.png" /> <link rel="icon" type="image/png" sizes="48x48" href="/favicons/android-icon-48x48.png" /> <link rel="icon" type="image/png" sizes="72x72" href="/favicons/android-icon-72x72.png" /> <link rel="apple-touch-icon" sizes="32x32" href="/favicons/apple-icon-32x32.png"> <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-icon-72x72.png"> </head> <body> <?php require 'php/db-connect.php'; // DB ì ‘ì† ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(ë°©ë²•-1) //include 'php/db-connect.php'; // DB ì ‘ì† ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(ë°©ë²•-2) $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb4", $username, $password); // ì˜¤ëŠ˜ì˜ ë‚ ì§œ ì¶œë ¥ $today = date('Y/m/d H:i'); echo "<div style='margin-top: 30px'>ì˜¤ëŠ˜ì˜ ë‚ ì§œ: $today</div>"; // ì›” ì„ íƒ ë²„íŠ¼ ìƒì„± // <div>ì— id="month-buttons" ì¶”ê°€.(íˆìŠ¤í† ë¦¬ ì°¨ë‹¨ëª©ì ;ë˜ëŒì•„ê°€ê¸° ì—†ì•°) // <a> íƒœê·¸ì— data-month='$month' ì¶”ê°€.(íˆìŠ¤í† ë¦¬ ì°¨ë‹¨ëª©ì ;ë˜ëŒì•„ê°€ê¸° ì—†ì•°) $months = range(1, 12); $currentMonth = isset($_GET['month']) ? intval($_GET['month']) : date('n'); echo "<div style='margin-top: 20px' id='month-buttons'>"; foreach ($months as $month) { $activeClass = ($month == $currentMonth) ? 'active' : ''; echo "<a class='btn $activeClass' href='?month=$month' data-month='$month'>$month ì›”</a>"; } echo "</div>"; echo "<div class='notice'> [ì•Œë¦¼] í˜„ì¬ í•©ê³„ë¶€ë¶„ì´ ì œëŒ€ë¡œ ë³´ì´ì§€ì•Šìœ¼ë©´ ìœ„ ì›”ë‹¨ìœ„ì˜ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”! </div>"; // í˜„ì¬ ì—°ë„ ê°€ì ¸ì˜¤ê¸° $currentYear = date('Y'); // ì„ íƒí•œ ì›”ê¹Œì§€ì˜ ìˆ˜ì…/ì§€ì¶œ ë°ì´í„° ì¡°íšŒ $stmt = $pdo->prepare("SELECT date, amount FROM income_table WHERE YEAR(date) = ? AND MONTH(date) <= ? ORDER BY date DESC"); $stmt->execute([$currentYear, $currentMonth]); $incomeTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC); $stmt = $pdo->prepare("SELECT date, amount FROM expense_table WHERE YEAR(date) = ? AND MONTH(date) <= ? ORDER BY date DESC"); $stmt->execute([$currentYear, $currentMonth]); $expenseTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC); // ì›”ë³„ í•©ê³„ ê³„ì‚° $monthlyIncomeTotals = array_fill(1, 12, 0); $monthlyExpenseTotals = array_fill(1, 12, 0); foreach ($incomeTransactions as $transaction) { $month = (int)date('n', strtotime($transaction['date'])); $monthlyIncomeTotals[$month] += $transaction['amount']; } foreach ($expenseTransactions as $transaction) { $month = (int)date('n', strtotime($transaction['date'])); $monthlyExpenseTotals[$month] += $transaction['amount']; } // ì„ íƒí•œ ì›”ì˜ ì›”ìˆ˜ì…/ì›”ì§€ì¶œ í•©ê³„ $selectedMonthIncomeTotal = $monthlyIncomeTotals[$currentMonth]; $selectedMonthExpenseTotal = $monthlyExpenseTotals[$currentMonth]; // ë…„ìˆ˜ì…/ë…„ì§€ì¶œ í•©ê³„ $yearIncomeTotal = 0; $yearExpenseTotal = 0; for ($i = 1; $i <= $currentMonth; $i++) { $yearIncomeTotal += $monthlyIncomeTotals[$i]; $yearExpenseTotal += $monthlyExpenseTotals[$i]; } // ì´ì”ì•¡ ê³„ì‚° $balance = $yearIncomeTotal - $yearExpenseTotal; // í‘œì‹œìš© ë°ì´í„° (ì„ íƒí•œ ë‹¬, ì¼ì ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬) $stmt = $pdo->prepare("SELECT * FROM income_table WHERE MONTH(date) = ? AND YEAR(date) = ? ORDER BY date ASC"); $stmt->execute([$currentMonth, $currentYear]); $incomeTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC); $stmt = $pdo->prepare("SELECT * FROM expense_table WHERE MONTH(date) = ? AND YEAR(date) = ? ORDER BY date ASC"); $stmt->execute([$currentMonth, $currentYear]); $expenseTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC); // ìˆ˜ì •/ì‚­ì œ ì²˜ë¦¬ (ê¸°ì¡´ ìœ ì§€) if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['edit'])) { $editID = $_POST['edit']; $id = $_POST['id']; $date = $_POST['date']; $type = $_POST['type']; $category = $_POST['category']; $description = $_POST['description']; $amount = $_POST['amount']; if ($type === 'ìˆ˜ì…') { $table = 'income_table'; } elseif ($type === 'ì§€ì¶œ') { $table = 'expense_table'; } if ($editID === $id) { ?> <form method="POST" action="account_book.php"> <input type="hidden" name="id" value="<?php echo $id; ?>"> <input type="hidden" name="type" value="<?php echo $type; ?>"> <div class="form-group"> <label for="edit-date">ì¼ì:</label> <input type="date" class="form-control" id="edit-date" name="date" value="<?php echo $date; ?>" required> </div> <div class="form-group"> <label for="edit-category">í•­ëª©:</label> <input type="text" class="form-control" id="edit-category" name="category" value="<?php echo $category; ?>" required> </div> <div class="form-group"> <label for="edit-description">ë¹„ê³ :</label> <input type="text" class="form-control" id="edit-description" name="description" value="<?php echo $description; ?>" required> </div> <div class="form-group"> <label for="edit-amount">ê¸ˆì•¡:</label> <input type="number" class="form-control" id="edit-amount" name="amount" value="<?php echo $amount; ?>" required> </div> <div class="form-group"> <button type="submit" class="btn btn-primary" name="save">ì €ì¥</button> <button type="button" class="btn btn-secondary" onclick="location.href='account_edit.php'">ì·¨ì†Œ</button> </div> </form> <?php exit; } } if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['delete'])) { $deleteID = $_POST['delete']; $id = $_POST['id']; $type = $_POST['type']; if ($type === 'ìˆ˜ì…') { $table = 'income_table'; } else if ($type === 'ì§€ì¶œ') { $table = 'expense_table'; } $stmt = $pdo->prepare("DELETE FROM $table WHERE id = ?"); $stmt->execute([$id]); header("Location: account_edit.php"); exit; } ?> <!-- ìˆ˜ì… ëª©ë¡ --> <h3 style="width: 100%; text-align: center; color:darkgrey; margin-top: 30px">[ìˆ˜ì… ëª©ë¡]</h3> <table class="table table-bordered"> <thead> <tr> <th style="width: 5%; text-align: center;">no</th> <th style="width: 10%; text-align: center;">ì¼ì</th> <th style="width: 45%; text-align: center;">í•­ëª©</th> <th style="width: 30%; text-align: center;">ë¹„ê³ </th> <th style="width: 10%; text-align: center;">ê¸ˆì•¡</th> </tr> </thead> <tbody> <?php $incomeCounter = 1; foreach ($incomeTransactions as $transaction): ?> <tr> <td style="text-align: center;"><?php echo $incomeCounter++; ?></td> <td style="text-align: center;"><?php echo $transaction['date']; ?></td> <td><?php echo $transaction['category']; ?></td> <td><?php echo $transaction['description']; ?></td> <td class="amount-column"><?php echo number_format($transaction['amount']); ?>ì›</td> </tr> <?php endforeach; ?> </tbody> <tfoot> <tr> <td colspan="2" class="summary-label-income">ì›”ìˆ˜ì… í•©ê³„:</td> <td colspan="2" class="summary-value"><?php echo number_format($selectedMonthIncomeTotal); ?>ì›</td> <td></td> </tr> <tr> <td colspan="2" class="summary-label-income">ë…„ìˆ˜ì… í•©ê³„:</td> <td colspan="2" class="summary-value"><?php echo number_format($yearIncomeTotal); ?>ì›</td> <td></td> </tr> </tfoot> </table> <!-- ì§€ì¶œ ëª©ë¡ --> <h3 style="width: 100%; text-align: center; color:darkgrey; margin-top: 30px">[ì§€ì¶œ ëª©ë¡]</h3> <table class="table table-bordered"> <thead> <tr> <th style="width: 5%; text-align: center;">no</th> <th style="width: 10%; text-align: center;">ì¼ì</th> <th style="width: 45%; text-align: center;">í•­ëª©</th> <th style="width: 30%; text-align: center;">ë¹„ê³ </th> <th style="width: 10%; text-align: center;">ê¸ˆì•¡</th> </tr> </thead> <tbody> <?php $expenseCounter = 1; foreach ($expenseTransactions as $transaction): ?> <tr> <td style="text-align: center;"><?php echo $expenseCounter++; ?></td> <td style="text-align: center;"><?php echo $transaction['date']; ?></td> <td><?php echo $transaction['category']; ?></td> <td><?php echo $transaction['description']; ?></td> <td class="amount-column"><?php echo number_format($transaction['amount']); ?>ì›</td> </tr> <?php endforeach; ?> </tbody> <tfoot> <tr> <td colspan="2" class="summary-label-expense">ì›”ì§€ì¶œ í•©ê³„:</td> <td colspan="2" class="summary-value"><?php echo number_format($selectedMonthExpenseTotal); ?>ì›</td> <td></td> </tr> <tr> <td colspan="2" class="summary-label-expense">ë…„ì§€ì¶œ í•©ê³„:</td> <td colspan="2" class="summary-value"><?php echo number_format($yearExpenseTotal); ?>ì›</td> <td></td> </tr> </tfoot> </table> <!-- ì´ì”ì•¡ --> <div> <h3 class="total_balance">ì´ì”ì•¡:<span> <?php echo number_format($balance); ?>ì›</span></h3> <a class="account_image" href="./images_view.php"> <button type="button" class="btn btn-success">ì˜ìˆ˜ì¦ ì‚¬ì§„ë³´ê¸°</button> </a> </div> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> <!-- âœ… ì—¬ëŸ¬ "ì›”"ì„ í˜ì´ì§€ë³´ê¸°ë¥¼ í–ˆë‹¤ê°€ ì™„ì „íˆ ì‚¬ì´íŠ¸ë¥¼ ë‹«ê³ ìí• ë•Œ ê±°ì³ì˜¨ ë‹¬ë“¤ì„ ë‹¤ì‹œ ëŒì•„ê°€ëŠ”ê²ƒì„ ìƒëµí•˜ê³  ë¹¨ë¦¬ ë¹ ì ¸ ë‚˜ê°€ê³ ìí• ë•Œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©! 138,141ë¼ì¸ë„ ì¼ë¶€ ì½”ë“œë¥¼ ì¶”ê°€í•¨. JavaScriptë¡œ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ê°€ë¡œì±„ê³ , history.replaceState()ë¡œ íˆìŠ¤í† ë¦¬ë¥¼ ëŒ€ì²´ --> <script> document.querySelectorAll('#month-buttons a').forEach(button => { button.addEventListener('click', function(e) { e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ì°¨ë‹¨ const month = this.getAttribute('data-month'); // URLì„ ë³€ê²½í•˜ë˜ íˆìŠ¤í† ë¦¬ë¥¼ ëŒ€ì²´ window.history.replaceState({}, document.title, ?month=${month}); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ window.location.href = ?month=${month}; }); }); </script> <!-- ì±„ë„í†¡ ìƒë‹´ ì†ŒìŠ¤ --> <script> (function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})(); ChannelIO('boot', { "pluginKey": "8a8da17f-40dc-4f7b-87c4-718e23824191" }); </script> </body> </html>






â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£â™£



1. account_view.html (êµ¬ê¸€ firebase / Realtime Database ì—°ë™ë¨) ì½”ë“œë¥¼ ë¨¼ì €ë³´ì—¬ì¤€ë‹¤.
2. account_view.php ì½”ë“œë¥¼ ë³´ì—¬ì¤€ë‹¤.
3. php ì½”ë“œë¥¼ ì ìš©í•´ì„œ ë§Œë“¤ê±´ë° í˜ì´ì§€ì— ë³´ì—¬ì£¼ëŠ”ê±¸ ê°€ë¡œí˜•ìœ¼ë¡œ ë˜ì–´ìˆì–´ì„œ ë¶ˆí¸í•œê±°ê°™ì•„ìš”.  
account_view.html ê³¼ ë™ì¼í•œ ì„¸ë¡œ êµ¬ì¡°ì˜ í‹€ê³¼ ë””ìì¸ìƒ‰ìƒìœ¼ë¡œ 
í™”ë©´ì— ì¶œë ¥í•˜ê²Œ ë§Œë“  PHPì½”ë“œë¥¼ ë§Œë“¤ì–´ì¤˜ìš”.  

4. account_edit.php
5. account_input.php




===========================================================================
===========================================================================


[[ auth_check.php ì½”ë“œ ]]

<?php

// auth_check.php - ê´€ë¦¬ì ì¸ì¦ ì²´í¬ ê³µí†µ íŒŒì¼

// ì„¸ì…˜ ì‹œì‘ (ì´ë¯¸ ì‹œì‘ë˜ì—ˆëŠ”ì§€ í™•ì¸)
if (session_status() === PHP_SESSION_NONE) {
    session_start();
}

// ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
if (!isset($_SESSION['user_id']) || empty($_SESSION['user_id'])) {
    // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš°
    $_SESSION['redirect_url'] = $_SERVER['REQUEST_URI']; // í˜„ì¬ í˜ì´ì§€ URL ì €ì¥
    
    echo "<script>
        alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        location.href='../member/login_form.php';
    </script>";
    exit;
}

// ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ (level 10 ì´ìƒ)
if (!isset($_SESSION['user_level']) || $_SESSION['user_level'] < 10) {
    echo "<script>
        alert('ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ìë§Œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        history.back();
    </script>";
    exit;
}

// ë””ë²„ê¹…ìš© (í…ŒìŠ¤íŠ¸ í›„ ì‚­ì œ ê°€ëŠ¥)
// echo "<!-- ì¸ì¦ í†µê³¼: " . $_SESSION['user_name'] . " (Level: " . $_SESSION['user_level'] . ") -->";
?>




===========================================================================
===========================================================================


[[ db-connect.php ì½”ë“œ ]]


<?php

//[ì„ íƒ-1] dothome(ë‹·í™ˆ) DBê³„ì • ì‚¬ìš©!
 $host = 'localhost';
 $dbname = 'jikji35';
 $username = 'jikji35';
 $password = 'jeonsj84325285#'; 

 //[ì„ íƒ-3] ë‚´ì»´ ìì²´ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†ì •ë³´
//  $host = 'localhost';
//  $dbname = 'terraone';
//  $username = 'root';
//  $password = '84325285';

 //[ì„ íƒ] infinityfree DBê³„ì • ì‚¬ìš©!
  //$host = 'sql112.infinityfree.com';
  //$dbname = 'if0_38329280_jikji35';
  //$username = 'if0_38329280';
  //$password = 'Jel10hYSP4LK5D';


//[ì„ íƒ-2] ivyro(ì•„ì´ë¹„ë¡œ) DBê³„ì • ì‚¬ìš©!
// $host = 'localhost';
// $dbname = 'jikji35';
// $username = 'jikji35';
// $password = 'jeon2457#'; 






try {
    $db = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb4", $username, $password);
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    die("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨: " . $e->getMessage());
}


?>



===========================================================================
===========================================================================



[[ member.php ì½”ë“œ ]]

<?php

// ì´ê³³ì€ DB í…Œì´ë¸” memberë¥¼ ì‚¬ìš©í•œë‹¤.
// ë°”ì¸ë”©(binding); SQL êµ¬ë¬¸ê³¼ íŒŒë¼ë¯¸í„°(parameter) ê°’ì„ ì—°ê²°í•˜ëŠ” ê²ƒ
// íŒŒë¼ë¯¸í„°(parameter); í•¨ìˆ˜ë‚˜ ë©”ì†Œë“œ ë“±ì—ì„œ ì…ë ¥ë°›ëŠ” ê°’ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 



// (ì•„ë˜) "Member" í´ë˜ìŠ¤ ì •ì˜! ì—¬ëŸ¬í•¨ìˆ˜ë“¤ì„ ì´ ì†ì— í¬í•¨ì‹œì¼°ë‹¤.
// í´ë˜ìŠ¤ëª…ì€ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•œë‹¤.
 
class Member {  // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ë‹´ë‹¹
  // ë©¤ë²„ ë³€ìˆ˜, í”„ë¡œí¼í‹°
  private $conn; // private; ì™¸ë¶€ì—ì„œ ë‹¤ì´ë ‰íŠ¸ë¡œ ì ‘ê·¼ì´ ë¶ˆê°€!

  // ìƒì„±ì(ì²«ë²ˆì§¸ ë¬´ì¡°ê±´ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜)
  // public; ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
  public function __construct($db) {  //PDO ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ëŠ”ë‹¤($db)
    $this->conn = $db;
  }
  // ìœ„ì˜ ë©¤ë²„ í´ë˜ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤. $connì€ private ë³€ìˆ˜ë¡œ ì„ ì–¸ë˜ì–´ ìˆìœ¼ë©°, ìƒì„±ìë¥¼ í†µí•´ $dbë¼ëŠ” PDO ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ì•„ $connì— í• ë‹¹í•©ë‹ˆë‹¤. ì´í›„ $conn ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë©¤ë²„ ë³€ìˆ˜($conn)ì™€ ìƒì„±ì($db)ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì½”ë“œë¥¼ ìº¡ìŠí™”í•¨ìœ¼ë¡œì¨, ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  // $db ê°ì²´ë¥¼ Member í´ë˜ìŠ¤ ìƒì„±ìì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë°›ì•„ì„œ $conn ë©¤ë²„ ë³€ìˆ˜ì— í• ë‹¹í•©ë‹ˆë‹¤. $conn ë©¤ë²„ ë³€ìˆ˜ëŠ” ì´í›„ì— Member í´ë˜ìŠ¤ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ë•Œë§ˆë‹¤ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ë§¤ë²ˆ ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ëŠ” í•œ ë²ˆë§Œ ë§Œë“¤ì–´ë†“ê³  ê³µìœ í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.



  // [[ ì•„ì´ë”” ì¤‘ë³µì²´í¬ ]]
  // id_exists(); ì•„ì´ë”” ì¤‘ë³µì²´í¬ ~ ë©¤ë²„ í•¨ìˆ˜, ë©”ì†Œë“œ
  // í…Œì´ë¸”ëª…:  member

  public function id_exists($id) {
        try {
            $sql = "SELECT COUNT(*) FROM member WHERE id = :id";
            $stmt = $this->conn->prepare($sql);
            $stmt->bindParam(':id', $id, PDO::PARAM_STR);
            $stmt->execute();
            $count = $stmt->fetchColumn();
            
            return $count > 0; // true: ì¡´ì¬í•¨, false: ì¡´ì¬í•˜ì§€ ì•ŠìŒ
        } catch (PDOException $e) {
            return false;
        }
    }








  // [[ ì´ë©”ì¼ í˜•ì‹ ìœ íš¨ì„±ê²€ì‚¬ í…ŒìŠ¤íŠ¸ ]]   ==> @ ì‚½ì… ìœ ë¬´í™•ì¸!
  // email_format_check()ëŠ” ì´ë©”ì¼ì„ ê²€ì¦í•´ì£¼ëŠ” ë©”ì„œë“œì´ë‹¤.
  // í•¨ìˆ˜ëª…ì€ "email_format_check"ì´ê³ , ì…ë ¥ê°’ìœ¼ë¡œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ë°›ìŠµë‹ˆë‹¤.
  public function email_format_check($email) {
        return filter_var($email, FILTER_VALIDATE_EMAIL) !== false;
    }

  // (ì˜ˆ) $email = 'ddd' ë¡œ ì…ë ¥í•œë‹¤ë©´ ; // ê²°ê³¼ê°’: bool(false) ê²€ì¦ì‹¤íŒ¨!
  // (ì˜ˆ) $email = 'ddd@naver.com' ë¡œ ì…ë ¥í•œë‹¤ë©´ ; // ê²°ê³¼ê°’: string(11) "ddd@naver.com" ê²€ì¦í†µê³¼!




  // [[ ì´ë©”ì¼ ì¤‘ë³µì²´í¬ ]]
  public function email_exists($email) {
        try {
            $sql = "SELECT COUNT(*) FROM member WHERE email = :email";
            $stmt = $this->conn->prepare($sql);
            $stmt->bindParam(':email', $email, PDO::PARAM_STR);
            $stmt->execute();
            $count = $stmt->fetchColumn();
            
            return $count > 0; // true: ì¡´ì¬í•¨, false: ì¡´ì¬í•˜ì§€ ì•ŠìŒ
        } catch (PDOException $e) {
            return false;
        }
    }



  // [[ íšŒì›ì •ë³´ ê°€ì…ì…ë ¥ - ì•”í˜¸í™”ë¡œ ë§Œë“¬! ]]
  // PDOë¥¼ ì´ìš©í•œ ë°ì´í„°ë² ì´ìŠ¤ ì…ë ¥(insert) ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜!
 

  // íŒ¨ìŠ¤ì›Œë“œ(password) ë‹¨ë°©í–¥ ì•”í˜¸í™” ì‚¬ìš©!
  // ë˜‘ê°™ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ë„ ì½”ë“œê°’ì´ ë‹¤ë¥´ë‹¤!
   public function input($arr) { //ë°°ì—´ë¡œ ì²˜ë¦¬
        try {
            // ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
            $hashedPassword = password_hash($arr['password'], PASSWORD_DEFAULT);
            
            $sql = "INSERT INTO member (id, name, password, tel, email, zipcode, addr1, addr2, photo, create_at, ip, level) 
                    VALUES (:id, :name, :password, :tel, :email, :zipcode, :addr1, :addr2, :photo, NOW(), :ip, 1)";
            
            $stmt = $this->conn->prepare($sql);
            $stmt->bindParam(':id', $arr['id'], PDO::PARAM_STR);
            $stmt->bindParam(':name', $arr['name'], PDO::PARAM_STR);
            $stmt->bindParam(':password', $hashedPassword, PDO::PARAM_STR);
            $stmt->bindParam(':tel', $arr['tel'], PDO::PARAM_STR);
            $stmt->bindParam(':email', $arr['email'], PDO::PARAM_STR);
            $stmt->bindParam(':zipcode', $arr['zipcode'], PDO::PARAM_STR);
            $stmt->bindParam(':addr1', $arr['addr1'], PDO::PARAM_STR);
            $stmt->bindParam(':addr2', $arr['addr2'], PDO::PARAM_STR);
            $stmt->bindParam(':photo', $arr['photo'], PDO::PARAM_STR);
            
            $ip = $_SERVER['REMOTE_ADDR'];
            $stmt->bindParam(':ip', $ip, PDO::PARAM_STR);
            
            return $stmt->execute();
        } catch (PDOException $e) {
            echo "ì˜¤ë¥˜: " . $e->getMessage();
            return false;
        }
    }






  // ë¡œê·¸ì¸ ê°€ì…í™•ì¸($id, $pwë¡œ ì¸ìë¥¼ 2ê°œ ë°›ëŠ”í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©!)
  public function login($id, $pw) {
    // password_verify($password, $new_password)

    // ë¡œê·¸ì¸ ì•”í˜¸í™”ë¡œ íšŒì›ì •ë³´ ë¹„êµê²€ì¦ì„ í•˜ëŠ”ë° ì•”í˜¸í™”ëœê²ƒì´ë¼ ì•„ì´ë”” í•„ë“œë¥¼ ë¶ˆëŸ¬ì™€ idë¥¼ ì„œë¡œ ë¹„êµí•œë‹¤
    $sql = "SELECT password FROM member WHERE id=:id"; //(ì½”ë“œí’€ì´)~ id í•„ë“œì˜ ê°’ì´ :id ë³€ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê² ë‹¤ëŠ” ì˜ë¯¸(ì•ìª½ì— ìˆëŠ” idëŠ” DB í•„ë“œëª…)

    $stmt = $this->conn->prepare($sql);
    $stmt->bindParam(':id', $id); // íŒ¨ìŠ¤ì›Œë“œëŠ” ì•”í˜¸í™”ì²˜ë¦¬ëœ ìƒíƒœë¼ ë¶ˆëŸ¬ì˜¬ìˆ˜ê°€ ì—†ê³ , ì…ë ¥í•œ ì•„ì´ë””ì™€ ê°™ì€ ì•„ì´ë””ì¸ì§€ë¥¼ í™•ì¸í•œë‹¤ 
   
    $stmt->execute();

    if ($stmt->rowCount()) { // idê°€ ì¡´ì¬í•œë‹¤ë©´
      $row = $stmt->fetch();

      // password_verify PHP í•¨ìˆ˜ëŠ” ì•”í˜¸í™”ëœ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê²€ì¦í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
      if (password_verify($pw, $row['password'])) { //ì…ë ¥í•œ íŒ¨ìŠ¤ì›Œë“œ($pw) ì¸ìì™€, DBíŒ¨ìŠ¤ì›Œë“œ(password) ì¸ìë¥¼ ì„œë¡œ ë¹„êµ
        $sql = "UPDATE member SET login_dt=NOW() WHERE id=:id" ;
        $stmt = $this->conn->prepare($sql);
        $stmt->bindParam(':id', $id); 
        $stmt->execute();

      return true; //ì¼ì¹˜! ë¡œê·¸ì¸ì„±ê³µ, ../pg/login_process.pngë¡œ ë„˜ì–´ê°„ë‹¤
      
      } else {
        return false; //ë¶ˆì¼ì¹˜! ë¡œê·¸ì¸ì‹¤íŒ¨
      }

    } else {
      return false;
    }

    //return $stmt->rowCount() ? true : false; // ê°’ì´ 1ì´ë©´ true, 0ì´ë©´ false

  }



  public function logout() {
    session_start();
    session_destroy(); //ë¡œê·¸ì•„ì›ƒ ì‹œí‚¤ê¸°

    die('<script>self.location.href="../index.php";</script>');
  }



  public function getInfoFormIdx($idx) {
    $sql = "SELECT * FROM member WHERE idx=:idx";
    $stmt = $this->conn->prepare($sql);
    $stmt->bindParam(":idx", $idx);
    $stmt->setFetchMode(PDO::FETCH_ASSOC); //ì¤‘ë³µ ì¬ì²˜ë¦¬! ì˜ˆ) Array([idx] => 11 [id] => terraone     [name] => í™ê¸¸ë™ [password] => 0$OMpmptiI7QWOHnOGQhh0IuimkNTeL1xS9mfW1cKKujgwuJc9CcL/a [tel] => 010-2544-6666 [email] => rraone@naver.com  [zipcode] => 15292 [addr1] => ê²½ê¸° ì•ˆì‚°ì‹œ ìƒë¡êµ¬ ì„±í¬ë™ 591-1 (ì„±í¬ë™, ê²½ì¼ì´ˆë“±í•™êµ)       [addr2] => 12  [photo] => terraone.png       [create_at] => 2023-05-13 22:35:56        [login_dt] => 2023-05-15 10:02:33 [ip] => ::1)
    
    $stmt->execute();
    return $stmt->fetch();
  }




  public function getInfo($id) {
    $sql = "SELECT * FROM member WHERE id=:id";
    $stmt = $this->conn->prepare($sql);
    $stmt->bindParam(":id", $id);
    $stmt->setFetchMode(PDO::FETCH_ASSOC); //ì¤‘ë³µ ì¬ì²˜ë¦¬! ì˜ˆ) Array([idx] => 11 [id] => terraone     [name] => í™ê¸¸ë™ [password] => 0$OMpmptiI7QWOHnOGQhh0IuimkNTeL1xS9mfW1cKKujgwuJc9CcL/a [tel] => 010-2544-6666 [email] => rraone@naver.com  [zipcode] => 15292 [addr1] => ê²½ê¸° ì•ˆì‚°ì‹œ ìƒë¡êµ¬ ì„±í¬ë™ 591-1 (ì„±í¬ë™, ê²½ì¼ì´ˆë“±í•™êµ)       [addr2] => 12  [photo] => terraone.png       [create_at] => 2023-05-13 22:35:56        [login_dt] => 2023-05-15 10:02:33 [ip] => ::1)
    
    $stmt->execute();
    return $stmt->fetch();
  }



  // íšŒì›ì •ë³´ ìˆ˜ì •
  public function edit($marr) {
    $sql = "UPDATE member SET name=:name, tel=:tel, email=:email, zipcode=:zipcode, addr1=:addr1, addr2=:addr2, photo=:photo ";
    $params = [
      ':name' => $marr['name'],
      ':tel' => $marr['tel'],
      ':email' => $marr['email'],
      ':zipcode' => $marr['zipcode'],
      ':addr1' => $marr['addr1'],
      ':addr2' => $marr['addr2'],
      ':photo' => $marr['photo']
    ];

    if($marr['password'] != '') {
      // íŒ¨ìŠ¤ì›Œë“œ(password) ë‹¨ë°©í–¥ ì•”í˜¸í™” ì‚¬ìš©!
      $new_hash_password = password_hash($marr['password'], PASSWORD_DEFAULT);  // ì•”í˜¸í™”!
      $params[':password'] = $new_hash_password;

      $sql .= ", password=:password";
    }



    if($_SESSION['ses_level'] == 10 && isset($marr['idx']) && $marr['idx'] != '') {
      $params[':level'] = $marr['level']; //ë ˆë²¨ë³€ê²½
      $params[':idx'] = $marr['idx']; //íŒë‹¨
      $sql .= ", level=:level";
      $sql .= " WHERE idx=:idx";

    } else {
      $params[':id'] = $marr['id']; //ì¼ë°˜íšŒì›ì´ë¼ì„œ idê°’ì´ í•„ìš”
      $sql .= " WHERE id=:id";  // [ì¤‘ìš”!]: " WHERE ì ˆ ì•ì— ë°˜ë“œì‹œ ê³µë°± ì¶”ê°€! "(ê³µë°±) WHE... ê·¸ë ‡ì§€ì•Šìœ¼ë©´ íŒ¨ìŠ¤ì›Œë“œ ë³€ê²½ì‹œì— ì—ëŸ¬ê°€ ë‚œë‹¤.
    }


    $stmt = $this->conn->prepare($sql);
    $stmt->execute($params);

  }




    // íšŒì›ëª©ë¡ ê´€ë¦¬(ê²Œì‹œíŒ)
    // ë²ˆí˜¸, ì•„ì´ë””, ì´ë¦„, ì´ë©”ì¼, ë“±ë¡ì¼ì‹œ ê¼­ í•„ìš”í•œê²ƒë§Œ ê°€ì ¸ì˜¨ë‹¤.
    // ì•„ë˜ ì¿¼ë¦¬ë¬¸ì—ì„œ dateì¶œë ¥ì„ í• ìˆ˜ë„ìˆë‹¤. (ë°©ë²•-2) $sql = "SELECT idx, id, name, email, DATE_FORMAT(create_at,'%Y-%m-%d %H:%i') AS create_at FROM member ORDER BY idx DESC";   ====> 2023-03-15 15:58


    public function list($page, $limit, $paramArr) { //DESC; ë°ì´íƒ€ ì—­ìˆœìœ¼ë¡œ ì •ë ¬
      $start = ($page - 1) * $limit; // 1í˜ì´ì§€ë¼ë©´ 0,5/ 2í˜ì´ì§€ë¼ë©´ 5,5/ 3í˜ì´ì§€ë¼ë©´ 10,5/15,5...

      $where = "";
      if($paramArr['sn'] != '' && $paramArr['sf'] != '' ) {
        switch($paramArr['sn']) {
          case 1 : $sn_str = 'name'; break;
          case 2 : $sn_str = 'id'; break;
          case 3 : $sn_str = 'email'; break;
        }

        $where = " WHERE ". $sn_str."=:sf "; //ë„ì›Œì“°ê¸° ì£¼ì˜!
      }

      $sql = "SELECT idx, id, name, email, DATE_FORMAT(create_at, '%Y-%m-%d %H:%i') AS create_at FROM member ". $where ." ORDER BY idx DESC LIMIT ".$start.",". $limit;  //1í˜ì´ì§€ë©´ 0,5,  2í˜ì´ì§€ë©´ 5,5 /10, 5/ 10, 5..
    // DATE_FORMAT(create_at, '%Y-%m-%d %H:%i')ëŠ” ë‚ ì§œì—ì„œ ë§ˆì§€ë§‰ "ì´ˆ"ë¥¼ ìƒëµí•˜ê¸°ìœ„í•¨!
    // ORDER BY idx DESC LIMITëŠ” ì¶œë ¥ë¬¼ì„ ë‚´ë¦¼ì°¨ìˆœ(ìµœì‹ ê²Œì‹œë¬¼ì´ ì œì¼ìœ„ë¡œ ê°€ê²Œë” í•˜ê¸°ìœ„í•¨!)
     
      $stmt = $this->conn->prepare($sql);

      if($where != '') {
        $stmt->bindParam(':sf', $paramArr['sf']);
      }

      $stmt->setFetchMode(PDO::FETCH_ASSOC); //ì¤‘ë³µ ì¬ì²˜ë¦¬! , ASSOCëŠ” í•„ë“œëª…ë§Œ ê°€ì ¸ì˜¨ë‹¤.
      $stmt->execute();
      return $stmt->fetchAll(); //ëª¨ë‘ ê°€ì ¸ì˜¨ë‹¤() , fetch()ëŠ” í•œê°œë§Œ ê°€ì ¸ì˜¨ë‹¤.
    }




    // ê²Œì‹œíŒëª©ë¡ ê°¯ìˆ˜êµ¬í•˜ê¸°
    public function total($paramArr) {

      $where = "";
      if($paramArr['sn'] != '' && $paramArr['sf'] != '' ) {
        switch($paramArr['sn']) {
          case 1 : $sn_str = 'name'; break;
          case 2 : $sn_str = 'id'; break;
          case 3 : $sn_str = 'email'; break;
        }

        $where = " WHERE ". $sn_str."=:sf "; // "(ê³µë°±ì²˜ë¦¬)WHERE" => ë„ì›Œì“°ê¸° ì£¼ì˜!
      }


      $sql = "SELECT COUNT(*) cnt FROM member ". $where;  // "member(ê³µë°±ì²˜ë¦¬)" => ë„ì›Œì“°ê¸° ì£¼ì˜!
      // echo $sql; // í…ŒìŠ¤íŠ¸ í™•ì¸í•´ë³¼ê²ƒ!
      // exit;

      $stmt = $this->conn->prepare($sql);

      if($where != '') {
        $stmt->bindParam(':sf', $paramArr['sf']);
      }

      $stmt->setFetchMode(PDO::FETCH_ASSOC); //ì¤‘ë³µ ì¬ì²˜ë¦¬! , ASSOCëŠ” í•„ë“œëª…ë§Œ ê°€ì ¸ì˜¨ë‹¤.
      $stmt->execute();
      $row = $stmt->fetch(); 
      return $row['cnt'];  // rowì— cntê°’ì„ ë˜ì ¸ì¤€ë‹¤

    }



    // íšŒì›ëª©ë¡ ê´€ë¦¬(ë°ì´íƒ€ë¥¼ ì—‘ì…€ì— ì €ì¥í•˜ê¸°ìœ„í•œ ì‘ì—…)

    public function getAllData() { 

      $sql = "SELECT * FROM member  ORDER BY idx ASC";  
      $stmt = $this->conn->prepare($sql);
      $stmt->setFetchMode(PDO::FETCH_ASSOC); //ì¤‘ë³µ ì¬ì²˜ë¦¬! , ASSOCëŠ” í•„ë“œëª…ë§Œ ê°€ì ¸ì˜¨ë‹¤.
      $stmt->execute();
      return $stmt->fetchAll(); //ëª¨ë‘ ê°€ì ¸ì˜¨ë‹¤()
    }



    


    // íšŒì›ì‚­ì œ

    public function member_del($idx) {
      // (ì‚­ì œë°©ë²•-1)
      // $sql = "delete from member where idx=". $idx;

      // (ì‚­ì œë°©ë²•-2)
      $sql = "DELETE FROM member WHERE idx=:idx";  // í…Œì´ë¸”ëª…; member
      $stmt = $this->conn->prepare($sql);
      $stmt->bindParam(':idx', $idx);
      $stmt->execute();

    }





    // í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ==> public; ì™¸ë¶€ì ‘ê·¼ ê°€ëŠ¥!
    public function profile_upload($id, $new_photo, $old_photo) {
        if ($new_photo['name'] != '') {
            $tmparr = explode('.', $new_photo['name']);
            $ext = end($tmparr);
            $photo = $id . '.' . $ext;
            
            // ê¸°ì¡´ íŒŒì¼ ì‚­ì œ
            if ($old_photo != '' && file_exists("../data/profile/" . $old_photo)) {
                unlink("../data/profile/" . $old_photo);
            }
            
            // ìƒˆ íŒŒì¼ ì—…ë¡œë“œ
            copy($new_photo['tmp_name'], "../data/profile/" . $photo);
            
            return $photo;
        }
        
        return $old_photo;
    }




} // Member Class ëë¶€ë¶„









===========================================================================


[[ account_view.php ì½”ë“œ ]]

<!-- âœ… í˜ì´ì§€ ê·¸ëŒ€ë¡œì˜ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´ ì—ëŸ¬ê°€ ë‚˜ë¯€ë¡œ ë°˜ë“œì‹œ ?month=ìˆ«ì(í˜„ì¬ì˜ ë‹¬)ì„ ê°™ì´ ì…ë ¥í•´ì•¼í•œë‹¤. (ì˜ˆ)http://localhost/home/account_view.php?month=5  í˜„ì¬5ì›”ë‹¬ì´ë¼ë©´ ===>  ?month=5 ì¶”ê°€ì…ë ¥!   ìƒë‹¨ ì›”ë‹¨ìœ„ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤˜ë„ ë³µêµ¬ëœë‹¤. -->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="J.S.J" />
  <title>ì‚¬ìš©ë‚´ì—­ì„œë³´ê¸°</title>
  <link rel="stylesheet" href="css/account_view.css" />
  <link rel="manifest" href="manifest.json">
  <meta name="msapplication-config" content="/browserconfig.xml">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <!-- Bootstrap CSS (5.3.3) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
  <!-- íŒŒë¹„ì½˜ ì•„ì´ì½˜ë“¤ -->
  <link rel="icon" href="/favicon.ico?v=2" />

  <link rel="icon" type="image/png" sizes="36x36" href="/favicons/android-icon-36x36.png" />
  <link rel="icon" type="image/png" sizes="48x48" href="/favicons/android-icon-48x48.png" />
  <link rel="icon" type="image/png" sizes="72x72" href="/favicons/android-icon-72x72.png" />

  <link rel="apple-touch-icon" sizes="32x32" href="/favicons/apple-icon-32x32.png">
  <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-icon-72x72.png">
  

</head>

<body>

<?php
  
  
require 'php/db-connect.php'; // DB ì ‘ì† ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(ë°©ë²•-1)
//include 'php/db-connect.php'; // DB ì ‘ì† ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(ë°©ë²•-2)  
  


$pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb4", $username, $password);

// ì˜¤ëŠ˜ì˜ ë‚ ì§œ ì¶œë ¥
$today = date('Y/m/d H:i');
echo "<div style='margin-top: 30px'>ì˜¤ëŠ˜ì˜ ë‚ ì§œ: $today</div>";
  

// ì›” ì„ íƒ ë²„íŠ¼ ìƒì„±
// <div>ì— id="month-buttons" ì¶”ê°€.(íˆìŠ¤í† ë¦¬ ì°¨ë‹¨ëª©ì ;ë˜ëŒì•„ê°€ê¸° ì—†ì•°)
// <a> íƒœê·¸ì— data-month='$month' ì¶”ê°€.(íˆìŠ¤í† ë¦¬ ì°¨ë‹¨ëª©ì ;ë˜ëŒì•„ê°€ê¸° ì—†ì•°)
  
$months = range(1, 12);
$currentMonth = isset($_GET['month']) ? intval($_GET['month']) : date('n');
echo "<div style='margin-top: 20px' id='month-buttons'>";
foreach ($months as $month) {
  $activeClass = ($month == $currentMonth) ? 'active' : '';
  echo "<a class='btn $activeClass' href='?month=$month' data-month='$month'>$month ì›”</a>";
}
echo "</div>";
echo "<div class='notice'> [ì•Œë¦¼] í˜„ì¬ í•©ê³„ë¶€ë¶„ì´ ì œëŒ€ë¡œ ë³´ì´ì§€ì•Šìœ¼ë©´ ìœ„ ì›”ë‹¨ìœ„ì˜ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”! </div>";

// í˜„ì¬ ì—°ë„ ê°€ì ¸ì˜¤ê¸°
$currentYear = date('Y');

// ì„ íƒí•œ ì›”ê¹Œì§€ì˜ ìˆ˜ì…/ì§€ì¶œ ë°ì´í„° ì¡°íšŒ
$stmt = $pdo->prepare("SELECT date, amount FROM income_table WHERE YEAR(date) = ? AND MONTH(date) <= ? ORDER BY date DESC");
$stmt->execute([$currentYear, $currentMonth]);
$incomeTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC);

$stmt = $pdo->prepare("SELECT date, amount FROM expense_table WHERE YEAR(date) = ? AND MONTH(date) <= ? ORDER BY date DESC");
$stmt->execute([$currentYear, $currentMonth]);
$expenseTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC);

// ì›”ë³„ í•©ê³„ ê³„ì‚°
$monthlyIncomeTotals = array_fill(1, 12, 0);
$monthlyExpenseTotals = array_fill(1, 12, 0);

foreach ($incomeTransactions as $transaction) {
  $month = (int)date('n', strtotime($transaction['date']));
  $monthlyIncomeTotals[$month] += $transaction['amount'];
}

foreach ($expenseTransactions as $transaction) {
  $month = (int)date('n', strtotime($transaction['date']));
  $monthlyExpenseTotals[$month] += $transaction['amount'];
}

// ì„ íƒí•œ ì›”ì˜ ì›”ìˆ˜ì…/ì›”ì§€ì¶œ í•©ê³„
$selectedMonthIncomeTotal = $monthlyIncomeTotals[$currentMonth];
$selectedMonthExpenseTotal = $monthlyExpenseTotals[$currentMonth];

// ë…„ìˆ˜ì…/ë…„ì§€ì¶œ í•©ê³„
$yearIncomeTotal = 0;
$yearExpenseTotal = 0;
for ($i = 1; $i <= $currentMonth; $i++) {
  $yearIncomeTotal += $monthlyIncomeTotals[$i];
  $yearExpenseTotal += $monthlyExpenseTotals[$i];
}

// ì´ì”ì•¡ ê³„ì‚°
$balance = $yearIncomeTotal - $yearExpenseTotal;

// í‘œì‹œìš© ë°ì´í„° (ì„ íƒí•œ ë‹¬, ì¼ì ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬)
$stmt = $pdo->prepare("SELECT * FROM income_table WHERE MONTH(date) = ? AND YEAR(date) = ? ORDER BY date ASC");
$stmt->execute([$currentMonth, $currentYear]);
$incomeTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC);

$stmt = $pdo->prepare("SELECT * FROM expense_table WHERE MONTH(date) = ? AND YEAR(date) = ? ORDER BY date ASC");
$stmt->execute([$currentMonth, $currentYear]);
$expenseTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC);

// ìˆ˜ì •/ì‚­ì œ ì²˜ë¦¬ (ê¸°ì¡´ ìœ ì§€)
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['edit'])) {
  $editID = $_POST['edit'];
  $id = $_POST['id'];
  $date = $_POST['date'];
  $type = $_POST['type'];
  $category = $_POST['category'];
  $description = $_POST['description'];
  $amount = $_POST['amount'];

  if ($type === 'ìˆ˜ì…') {
    $table = 'income_table';
  } elseif ($type === 'ì§€ì¶œ') {
    $table = 'expense_table';
  }

  if ($editID === $id) {
    ?>
    <form method="POST" action="account_book.php">
      <input type="hidden" name="id" value="<?php echo $id; ?>">
      <input type="hidden" name="type" value="<?php echo $type; ?>">
      <div class="form-group">
        <label for="edit-date">ì¼ì:</label>
        <input type="date" class="form-control" id="edit-date" name="date" value="<?php echo $date; ?>" required>
      </div>
      <div class="form-group">
        <label for="edit-category">í•­ëª©:</label>
        <input type="text" class="form-control" id="edit-category" name="category" value="<?php echo $category; ?>" required>
      </div>
      <div class="form-group">
        <label for="edit-description">ë¹„ê³ :</label>
        <input type="text" class="form-control" id="edit-description" name="description" value="<?php echo $description; ?>" required>
      </div>
      <div class="form-group">
        <label for="edit-amount">ê¸ˆì•¡:</label>
        <input type="number" class="form-control" id="edit-amount" name="amount" value="<?php echo $amount; ?>" required>
      </div>
      <div class="form-group">
        <button type="submit" class="btn btn-primary" name="save">ì €ì¥</button>
        <button type="button" class="btn btn-secondary" onclick="location.href='account_edit.php'">ì·¨ì†Œ</button>
      </div>
    </form>
    <?php
    exit;
  }
}

if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['delete'])) {
  $deleteID = $_POST['delete'];
  $id = $_POST['id'];
  $type = $_POST['type'];

  if ($type === 'ìˆ˜ì…') {
    $table = 'income_table';
  } else if ($type === 'ì§€ì¶œ') {
    $table = 'expense_table';
  }

  $stmt = $pdo->prepare("DELETE FROM $table WHERE id = ?");
  $stmt->execute([$id]);

  header("Location: account_edit.php");
  exit;
}
?>

<!-- ìˆ˜ì… ëª©ë¡ -->
<h3 style="width: 100%; text-align: center; color:darkgrey; margin-top: 30px">[ìˆ˜ì… ëª©ë¡]</h3>
<table class="table table-bordered">
  <thead>
    <tr>
      <th style="width: 5%; text-align: center;">no</th>
      <th style="width: 10%; text-align: center;">ì¼ì</th>
      <th style="width: 45%; text-align: center;">í•­ëª©</th>
      <th style="width: 30%; text-align: center;">ë¹„ê³ </th>
      <th style="width: 10%; text-align: center;">ê¸ˆì•¡</th>
    </tr>
  </thead>
  <tbody>
    <?php 
    $incomeCounter = 1;
    foreach ($incomeTransactions as $transaction): ?>
      <tr>
        <td style="text-align: center;"><?php echo $incomeCounter++; ?></td>
        <td style="text-align: center;"><?php echo $transaction['date']; ?></td>
        <td><?php echo $transaction['category']; ?></td>
        <td><?php echo $transaction['description']; ?></td>
        <td class="amount-column"><?php echo number_format($transaction['amount']); ?>ì›</td>
      </tr>
    <?php endforeach; ?>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="2" class="summary-label-income">ì›”ìˆ˜ì… í•©ê³„:</td>
      <td colspan="2" class="summary-value"><?php echo number_format($selectedMonthIncomeTotal); ?>ì›</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2" class="summary-label-income">ë…„ìˆ˜ì… í•©ê³„:</td>
      <td colspan="2" class="summary-value"><?php echo number_format($yearIncomeTotal); ?>ì›</td>
      <td></td>
    </tr>
  </tfoot>
</table>

<!-- ì§€ì¶œ ëª©ë¡ -->
<h3 style="width: 100%; text-align: center; color:darkgrey; margin-top: 30px">[ì§€ì¶œ ëª©ë¡]</h3>
<table class="table table-bordered">
  <thead>
    <tr>
      <th style="width: 5%; text-align: center;">no</th>
      <th style="width: 10%; text-align: center;">ì¼ì</th>
      <th style="width: 45%; text-align: center;">í•­ëª©</th>
      <th style="width: 30%; text-align: center;">ë¹„ê³ </th>
      <th style="width: 10%; text-align: center;">ê¸ˆì•¡</th>
    </tr>
  </thead>
  <tbody>
    <?php 
    $expenseCounter = 1;
    foreach ($expenseTransactions as $transaction): ?>
      <tr>
        <td style="text-align: center;"><?php echo $expenseCounter++; ?></td>
        <td style="text-align: center;"><?php echo $transaction['date']; ?></td>
        <td><?php echo $transaction['category']; ?></td>
        <td><?php echo $transaction['description']; ?></td>
        <td class="amount-column"><?php echo number_format($transaction['amount']); ?>ì›</td>
      </tr>
    <?php endforeach; ?>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="2" class="summary-label-expense">ì›”ì§€ì¶œ í•©ê³„:</td>
      <td colspan="2" class="summary-value"><?php echo number_format($selectedMonthExpenseTotal); ?>ì›</td>
      <td></td>
    </tr>
    <tr>
      <td colspan="2" class="summary-label-expense">ë…„ì§€ì¶œ í•©ê³„:</td>
      <td colspan="2" class="summary-value"><?php echo number_format($yearExpenseTotal); ?>ì›</td>
      <td></td>
    </tr>
  </tfoot>
</table>

<!-- ì´ì”ì•¡ -->
<div>
  <h3 class="total_balance">ì´ì”ì•¡:<span> <?php echo number_format($balance); ?>ì›</span></h3>
  <a class="account_image" href="./images_view.php">
    <button type="button" class="btn btn-success">ì˜ìˆ˜ì¦ ì‚¬ì§„ë³´ê¸°</button>
  </a>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


<!-- âœ… ì—¬ëŸ¬ "ì›”"ì„ í˜ì´ì§€ë³´ê¸°ë¥¼ í–ˆë‹¤ê°€ ì™„ì „íˆ ì‚¬ì´íŠ¸ë¥¼ ë‹«ê³ ìí• ë•Œ ê±°ì³ì˜¨ ë‹¬ë“¤ì„ ë‹¤ì‹œ ëŒì•„ê°€ëŠ”ê²ƒì„ ìƒëµí•˜ê³  ë¹¨ë¦¬ ë¹ ì ¸ ë‚˜ê°€ê³ ìí• ë•Œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©! 138,141ë¼ì¸ë„ ì¼ë¶€ ì½”ë“œë¥¼ ì¶”ê°€í•¨.
JavaScriptë¡œ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ê°€ë¡œì±„ê³ , history.replaceState()ë¡œ íˆìŠ¤í† ë¦¬ë¥¼ ëŒ€ì²´   -->
<script>
  document.querySelectorAll('#month-buttons a').forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ì°¨ë‹¨
      const month = this.getAttribute('data-month');
      // URLì„ ë³€ê²½í•˜ë˜ íˆìŠ¤í† ë¦¬ë¥¼ ëŒ€ì²´
      window.history.replaceState({}, document.title, `?month=${month}`);
      // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
      window.location.href = `?month=${month}`;
    });
  });
</script>


<!-- ì±„ë„í†¡ ìƒë‹´ ì†ŒìŠ¤ -->
<script>
  (function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})();
  
  ChannelIO('boot', {
    "pluginKey": "8a8da17f-40dc-4f7b-87c4-718e23824191"
  });
</script>
</body>
</html>





===========================================================================
===========================================================================


[[ account_edit.php ì½”ë“œ ]]

<!-- âœ… íŒŒì¼ê·¸ë˜ë¡œì˜ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´ ì—ëŸ¬ê°€ ë‚˜ë¯€ë¡œ ë°˜ë“œì‹œ ?month=ìˆ«ì(í˜„ì¬ì˜ ë‹¬)ì„ ê°™ì´ ì…ë ¥í•´ì•¼í•œë‹¤. (ì˜ˆ) http://localhost/account_input/account_edit.php?month=5  í˜„ì¬5ì›”ë‹¬ì´ë¼ë©´ ===>  ?month=5 ì¶”ê°€ì…ë ¥!   ìƒë‹¨ ì›”ë‹¨ìœ„ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤˜ë„ ë³µêµ¬ëœë‹¤. -->


<?php require 'php/auth_check.php'; ?>


<!-- â­ ê´€ë¦¬ì ì¸ì¦ â€” ë¡œê·¸ì¸ + ë ˆë²¨10 í™•ì¸ -->
 <?php
require 'php/auth_check.php';
?>

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="J.S.J" />
    <title>ì‚¬ìš©ë‚´ì—­ì„œí¸ì§‘</title>
    <link rel="stylesheet" href="css/account_edit.css" />
    <link rel="manifest" href="manifest.json">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    

    <!-- Bootstrap CSS (5.3.3) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />

    <!-- íŒŒë¹„ì½˜ ì•„ì´ì½˜ë“¤ -->
    <link rel="icon" href="/favicon.ico?v=2" />

    <link rel="icon" type="image/png" sizes="36x36" href="/favicons/android-icon-36x36.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="/favicons/android-icon-48x48.png" />
    <link rel="icon" type="image/png" sizes="72x72" href="/favicons/android-icon-72x72.png" />

    <link rel="apple-touch-icon" sizes="32x32" href="/favicons/apple-icon-32x32.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-icon-72x72.png">

</head>
<body>

<?php
ob_start(); // ì¶œë ¥ ë²„í¼ë§ ì‹œì‘(ì˜¤ë¥˜ ë©”ì„¸ì§€ ë°©ì§€ì°¨ì›!)


require 'php/db-connect.php'; // DB ì ‘ì† ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(ë°©ë²•-1)
//include 'php/db-connect.php'; // DB ì ‘ì† ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(ë°©ë²•-2)  
  


try {
    $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb4", $username, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    die("ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ì˜¤ë¥˜: " . $e->getMessage());
}

// í˜„ì¬ ì—°ë„ì™€ ì›” ì„¤ì •
$currentYear = date('Y');
$currentMonth = isset($_GET['month']) ? intval($_GET['month']) : date('n');

// ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['edit'])) {
    $editID = $_POST['edit'];
    $id = $_POST['id'];
    $date = $_POST['date'];
    $type = $_POST['type'];
    $category = $_POST['category'];
    $description = $_POST['description'];
    $amount = $_POST['amount'];

    if ($type === 'ìˆ˜ì…') {
        $table = 'income_table';
    } elseif ($type === 'ì§€ì¶œ') {
        $table = 'expense_table';
    }

    if ($editID === $id) {
        ob_end_clean(); // ì´ì „ ì¶œë ¥ ë²„í¼ ì§€ìš°ê¸°
        ?> 
        <div class="edit-form-container">
            <form method="POST" action="" class="edit-form">
                <input type="hidden" name="id" value="<?php echo $id; ?>">
                <input type="hidden" name="type" value="<?php echo $type; ?>">
                <div class="form-group">
                    <label for="edit-date">ì¼ì:</label>
                    <input type="date" class="form-control" id="edit-date" name="date" value="<?php echo $date; ?>" required>
                </div>
                <div class="form-group">
                    <label for="edit-category">í•­ëª©:</label>
                    <input type="text" class="form-control" id="edit-category" name="category" value="<?php echo $category; ?>" required>
                </div>
                <div class="form-group">
                    <label for="edit-description">ë¹„ê³ :</label>
                    <input type="text" class="form-control" id="edit-description" name="description" value="<?php echo $description; ?>" required>
                </div>
                <div class="form-group">
                    <label for="edit-amount">ê¸ˆì•¡:</label>
                    <input type="number" class="form-control" id="edit-amount" name="amount" value="<?php echo $amount; ?>" required>
                </div>
                <div class="form-group">
                    <button type="submit" name="update" class="btn btn-primary">ì—…ë°ì´íŠ¸</button>
                    <button type="button" class="btn btn-secondary" onclick="location.href='account_edit.php?month=<?php echo $currentMonth; ?>'">ì·¨ì†Œ</button>
                </div>
            </form>
        </div>
        

    <?php
    exit;
    }
}

// ì—…ë°ì´íŠ¸ ì²˜ë¦¬
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['update'])) {
    $id = $_POST['id'];
    $date = $_POST['date'];
    $type = $_POST['type'];
    $category = $_POST['category'];
    $description = $_POST['description'];
    $amount = $_POST['amount'];

    if ($type === 'ìˆ˜ì…') {
        $table = 'income_table';
    } elseif ($type === 'ì§€ì¶œ') {
        $table = 'expense_table';
    }

    $stmt = $pdo->prepare("UPDATE $table SET date = ?, category = ?, description = ?, amount = ? WHERE id = ?");
    $stmt->execute([$date, $category, $description, $amount, $id]);

    ob_end_clean();
    header("Location: account_edit.php?month=$currentMonth");
    exit;
}

// ì‚­ì œ ì²˜ë¦¬
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['delete'])) {
    $id = $_POST['id'];
    $type = $_POST['type'];

    if ($type === 'ìˆ˜ì…') {
        $table = 'income_table';
    } else if ($type === 'ì§€ì¶œ') {
        $table = 'expense_table';
    }

    $stmt = $pdo->prepare("DELETE FROM $table WHERE id = ?");
    $stmt->execute([$id]);

    ob_end_clean();
    header("Location: account_edit.php?month=$currentMonth");
    exit;
}

// ë°ì´í„° ì¡°íšŒ
$stmt = $pdo->prepare("SELECT date, amount FROM income_table WHERE YEAR(date) = ? AND MONTH(date) <= ? ORDER BY date DESC");
$stmt->execute([$currentYear, $currentMonth]);
$incomeTransactionsTotal = $stmt->fetchAll(PDO::FETCH_ASSOC);

$stmt = $pdo->prepare("SELECT date, amount FROM expense_table WHERE YEAR(date) = ? AND MONTH(date) <= ? ORDER BY date DESC");
$stmt->execute([$currentYear, $currentMonth]);
$expenseTransactionsTotal = $stmt->fetchAll(PDO::FETCH_ASSOC);

$monthlyIncomeTotals = array_fill(1, 12, 0);
$monthlyExpenseTotals = array_fill(1, 12, 0);

foreach ($incomeTransactionsTotal as $transaction) {
    $month = (int)date('n', strtotime($transaction['date']));
    $monthlyIncomeTotals[$month] += $transaction['amount'];
}

foreach ($expenseTransactionsTotal as $transaction) {
    $month = (int)date('n', strtotime($transaction['date']));
    $monthlyExpenseTotals[$month] += $transaction['amount'];
}

$selectedMonthIncomeTotal = $monthlyIncomeTotals[$currentMonth];
$selectedMonthExpenseTotal = $monthlyExpenseTotals[$currentMonth];

$yearIncomeTotal = 0;
$yearExpenseTotal = 0;
for ($i = 1; $i <= $currentMonth; $i++) {
    $yearIncomeTotal += $monthlyIncomeTotals[$i];
    $yearExpenseTotal += $monthlyExpenseTotals[$i];
}

$balance = $yearIncomeTotal - $yearExpenseTotal;

$stmt = $pdo->prepare("SELECT * FROM income_table WHERE MONTH(date) = ? AND YEAR(date) = ? ORDER BY date ASC");
$stmt->execute([$currentMonth, $currentYear]);
$incomeTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC);

$stmt = $pdo->prepare("SELECT * FROM expense_table WHERE MONTH(date) = ? AND YEAR(date) = ? ORDER BY date ASC");
$stmt->execute([$currentMonth, $currentYear]);
$expenseTransactions = $stmt->fetchAll(PDO::FETCH_ASSOC);
?>


  
    <div class="container">
        <section>
            <?php
            $today = date('Y/m/d H:i');
            echo "<div style='margin-top: 30px'>ì˜¤ëŠ˜ì˜ ë‚ ì§œ: $today</div>";

            $months = range(1, 12);
            echo "<div style='margin-top: 20px'>";
            foreach ($months as $month) {
                $activeClass = ($month == $currentMonth) ? 'active' : '';
                echo "<a class='btn $activeClass' href='?month=$month'>$month ì›”</a>";
            }
            echo "</div>";
            echo "<div class='notice'> [ì•Œë¦¼] ìˆ˜ì •/ì‚­ì œ í›„ í˜ì´ì§€ê°€ ìƒˆë¡œê³ ì¹¨ë©ë‹ˆë‹¤! </div>";
            ?>

            <!-- ìˆ˜ì… ëª©ë¡ -->
            <h3 style="width: 100%; text-align: center; color:darkgrey; margin-top: 30px">[ìˆ˜ì… ëª©ë¡]</h3>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>NO</th>
                        <th>ì¼ì</th>
                        <th>í•­ëª©</th>
                        <th>ë¹„ê³ </th>
                        <th>ê¸ˆì•¡</th>
                        <th>ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <?php 
                    $incomeCounter = 1;
                    foreach ($incomeTransactions as $transaction): ?>
                        <tr>
                            <td><?php echo $incomeCounter++; ?></td>
                            <td><?php echo $transaction['date']; ?></td>
                            <td><?php echo $transaction['category']; ?></td>
                            <td><?php echo $transaction['description']; ?></td>
                            <td class="amount-column"><?php echo number_format($transaction['amount']); ?>ì›</td>
                            <td>
                                <form method="POST">
                                    <input type="hidden" name="id" value="<?php echo $transaction['id']; ?>">
                                    <input type="hidden" name="date" value="<?php echo $transaction['date']; ?>">
                                    <input type="hidden" name="type" value="ìˆ˜ì…">
                                    <input type="hidden" name="category" value="<?php echo $transaction['category']; ?>">
                                    <input type="hidden" name="description" value="<?php echo $transaction['description']; ?>">
                                    <input type="hidden" name="amount" value="<?php echo $transaction['amount']; ?>">
                                    <div class="btn_edit_delete">
                                        <button type="submit" name="edit" value="<?php echo $transaction['id']; ?>" class="btn btn-primary">ìˆ˜ì •</button>
                                        <button type="submit" name="delete" value="<?php echo $transaction['id']; ?>" class="btn btn-danger">ì‚­ì œ</button>
                                    </div>
                                </form>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2" class="summary-label-income">ì›”ìˆ˜ì… í•©ê³„:</td>
                        <td colspan="2" class="summary-value"><?php echo number_format($selectedMonthIncomeTotal); ?>ì›</td>
                        <td colspan="2"></td>
                    </tr>
                    <tr>
                        <td colspan="2" class="summary-label-income">ë…„ìˆ˜ì… í•©ê³„:</td>
                        <td colspan="2" class="summary-value"><?php echo number_format($yearIncomeTotal); ?>ì›</td>
                        <td colspan="2"></td>
                    </tr>
                </tfoot>
            </table>

            <!-- ì§€ì¶œ ëª©ë¡ -->
            <h3 style="width: 100%; text-align: center; color:darkgrey; margin-top: 30px">[ì§€ì¶œ ëª©ë¡]</h3>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>NO</th>
                        <th>ì¼ì</th>
                        <th>í•­ëª©</th>
                        <th>ë¹„ê³ </th>
                        <th>ê¸ˆì•¡</th>
                        <th>ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <?php 
                    $expenseCounter = 1;
                    foreach ($expenseTransactions as $transaction): ?>
                        <tr>
                            <td><?php echo $expenseCounter++; ?></td>
                            <td><?php echo $transaction['date']; ?></td>
                            <td><?php echo $transaction['category']; ?></td>
                            <td><?php echo $transaction['description']; ?></td>
                            <td class="amount-column"><?php echo number_format($transaction['amount']); ?>ì›</td>
                            <td>
                                <form method="POST">
                                    <input type="hidden" name="id" value="<?php echo $transaction['id']; ?>">
                                    <input type="hidden" name="date" value="<?php echo $transaction['date']; ?>">
                                    <input type="hidden" name="type" value="ì§€ì¶œ">
                                    <input type="hidden" name="category" value="<?php echo $transaction['category']; ?>">
                                    <input type="hidden" name="description" value="<?php echo $transaction['description']; ?>">
                                    <input type="hidden" name="amount" value="<?php echo $transaction['amount']; ?>">
                                    <div class="btn_edit_delete">
                                        <button type="submit" name="edit" value="<?php echo $transaction['id']; ?>" class="btn btn-primary">ìˆ˜ì •</button>
                                        <button type="submit" name="delete" value="<?php echo $transaction['id']; ?>" class="btn btn-danger">ì‚­ì œ</button>
                                    </div>
                                </form>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2" class="summary-label-expense">ì›”ì§€ì¶œ í•©ê³„:</td>
                        <td colspan="2" class="summary-value"><?php echo number_format($selectedMonthExpenseTotal); ?>ì›</td>
                        <td colspan="2"></td>
                    </tr>
                    <tr>
                        <td colspan="2" class="summary-label-expense">ë…„ì§€ì¶œ í•©ê³„:</td>
                        <td colspan="2" class="summary-value"><?php echo number_format($yearExpenseTotal); ?>ì›</td>
                        <td colspan="2"></td>
                    </tr>
                </tfoot>
            </table>

            <!-- ì´ì”ì•¡ -->
            <div class="jikji_footer">
                <h3 class="total_balance">ì´ì”ì•¡:<span> <?php echo number_format($balance); ?>ì›</span></h3>
                <a class="account_image" href="./images_upload.php"><button type="button" class="btn btn-success">ì˜ìˆ˜ì¦ ì…ë ¥í•˜ê¸°</button></a>
                <button id="copyButton">íšŒì›ì—´ëŒìš© ì‚¬ì´íŠ¸ë³µì‚¬</button>
            </div>

            <script>
                function copyAddress() {
                    var address = "http://jikji35.dothome.co.kr/home/account_view.php?month=í•´ë‹¹ì›”ì„ ìˆ«ìë¡œì…ë ¥ í•˜ì‹œì˜¤";
                    var tempTextArea = document.createElement("textarea");
                    tempTextArea.value = address;
                    document.body.appendChild(tempTextArea);
                    tempTextArea.select();
                    document.execCommand("copy");
                    document.body.removeChild(tempTextArea);
                    alert("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
                }
                var copyButton = document.getElementById("copyButton");
                copyButton.addEventListener("click", copyAddress);
            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
           
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>

<?php
ob_end_flush(); // ì¶œë ¥ ë²„í¼ë§ ì¢…ë£Œ ë° ì¶œë ¥
?>





==========================================================================
==========================================================================













êµ¬ê¸€ firebase, Realtime Databaseë¥¼ ì‚¬ìš©í• ìˆ˜ìˆê²Œ ì½”ë“œë¥¼ 3ê°œ ë§Œë“¤ì—ˆì–´ìš”. 
íŒŒì¼ì€ account_input.html ì‚¬ìš©ë‚´ì—­ì„œ ì…ë ¥í˜ì´ì§€, account_edit.html ì‚¬ìš©ë‚´ì—­ì„œ í¸ì§‘í˜ì´ì§€,  account_view.html ì‚¬ìš©ë‚´ì—­ì„œ í˜ì´ì§€ë¡œ ë§Œë“¤ì—ˆì–´ìš”. 



account_input.html ì½”ë“œì¸ë° firebaseì™€ Realtime Databaseë¡œ ì›¹í˜ì´ì§€ë¥¼ ê°€ë™ë˜ëŠ”ë° account_view.html ì½”ë“œë¥¼ ë³´ë‚´ì¤„í…Œë‹ˆ ì½”ë“œë¥¼ ì¶”ê°€ë¡œ ë§Œë“¤ì–´ì£¼ì„¸ìš”.



í˜„ì¬ firebaseë¡œ íšŒì›ê°€ì…, ë¡œê·¸ì¸, íšŒì›í¸ì§‘ì„ ë°ì´íƒ€ë² ì´ìŠ¤ë¡œ ìš´ì˜í•˜ê³  ìˆê±°ë“ ìš”.  ê·¸ëŸ°ë° ì‚¬ìš©ë‚´ì—­ì„œì™€ ê°™ì€ ê¸ˆì „ì¶œë‚©ë¶€ì™€ ê°™ì€ ì„±ê²©ì˜ ë°ì´íƒ€ë² ì´ìŠ¤ëŠ” ë‹¤ë¥´ê²Œ ìš´ì˜ë˜ëŠ”ê±´ê°€ìš”?
Firebase ì½˜ì†” â†’ Storage â†’ ì„¤ì •ì—ì„œ í™•ì¸í•´ë³´ë©´ í˜ì´ì§€ê°€ storageBucket: "terraone-d0318.appspot.com",  ì´ëŸ°ê±´ ì•ˆë³´ì´ê³ , Storage í”„ë¡œì íŠ¸ ì—…ê·¸ë ˆì´ë“œ ì•ˆë‚´ë¬¸êµ¬ê°€ ë³´ì´ëŠ”êµ°ìš”. 


==========================================================================
==========================================================================




ë¨¼ì € ë°ì´íƒ€ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ë¨¼ì € ë§Œë“¤ì–´ì¤˜ìš”.  í…Œì´íƒ€ë² ì´ìŠ¤ëª…ì€ terraoneë¡œ í•˜ê³ ì‹¶ê³ ,  í…Œì´ë¸”ëª…ì€ tel,  ê·¸ë¦¬ê³  ê·¸ì† êµ¬ì¡°ëŠ”  idx, id`, password, name, tel, addr, remark, sms, sms_2, level ë¡œ ë§Œë“¤ê³ ì‹¶ì–´ìš”.
ìš©ë„ë¥¼ ë§í•˜ìë©´ idxëŠ” ìë™ìœ¼ë¡œ ë²ˆí˜¸ê°€ ë§Œë“¤ì–´ì§€ëŠ”ê²ƒì´ê³ , id,passwordëŠ” ë¡œê·¸ì¸ ê³¼ì •, nameëŠ” íšŒì›ê°€ì…ì— í•„ìš”í•œ ì´ë¦„, telì€ íœ´ëŒ€í°ì „í™”ë²ˆí˜¸,addrì€ ì£¼ì†Œ, remarkëŠ” ë¹„ê³ ë€ 5ê¸€ìí¬ê¸°ì •ë„, smsëŠ”  íœ´ëŒ€í°ì „í™”ë²ˆí˜¸, sms_2ëŠ” íœ´ëŒ€í°ì „í™”ë²ˆí˜¸ê°€ 30ëª…ì •ë„ ë“¤ì–´ê°ˆìˆ˜ìˆëŠ” ì‚¬ì´ì¦ˆ, levelì€ ë¡œê·¸ì¸ íšŒì›ì´ ê´€ë¦¬ìì¸ì§€, íšŒì›ì¸ì§€ë¥¼ êµ¬ë¶„í•´ì„œ ê´€ë¦¬ì í¸ì§‘í˜ì´ì§€ë¡œ ì§„ì…ê°€ëŠ” ìœ ë¬´ë¥¼ ê²€ì¦í•˜ê¸°ìœ„í•œê²ë‹ˆë‹¤. ê¸°ë³¸ í˜ì´ì§€ì¸ ë¡œê·¸ì¸í˜ì´ì§€, íšŒì›ê°€ì…í˜ì´ì§€, ë“±ë¡ëœ íšŒì›ì „ì²´ë¥¼ ë³´ì—¬ì£¼ëŠ”í˜ì´ì§€, ë¡œê·¸ì¸ê³¼ì •ì—ì„œ level 10ì¸ê²½ìš° ê´€ë¦¬ì ì§„ì…í˜ì´ì§€, íšŒì›ì „ì²´ë¥¼ ë³´ì—¬ì£¼ëŠ”í˜ì´ì§€ì˜ í˜•íƒœì—ì„œ ì¶”ê°€ë¡œ ì„ íƒì ìœ¼ë¡œ í´ë¦­í•´ì„œ(ì²´í¬ë°•ìŠ¤) ìˆ˜ì •, ì‚­ì œí• ìˆ˜ìˆëŠ”í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ë©´ ì¢‹ê² ë„¤ìš”.


ì´ì½”ë“œëŠ” index.htmlì¸ë° í˜¹ì‹œ cssë””ìì¸ì€ ì†ëŒ€ì§€ë§ê³  ì›í˜•ê·¸ëŒ€ë¡œ ë³´ì¡´í•˜ê³ ,  DBì™€ ì—°ë™ë˜ê²Œë” í•´ì¤„ìˆ˜ìˆëŠ”ê°€ìš”?  members.htmlì— ë“±ë¡ëœ íšŒì›ì„ 3ëª…ì„ ê°€ì ¸ì™€ì„œ ì—…ë¡œë“œí•˜ë©´ë˜ê³ , edit-member.htmlì—ì„œ ìˆ˜ì •ì´ë‚˜ ì‚­ì œí•˜ë©´ index.htmlí˜ì´ì§€ì—ì„œ ì—°ë™ì²˜ë¦¬í•˜ê²Œ í•˜ê³ ì‹¶ì–´ìš”. ê°€ëŠ¥í• ê¹Œìš”?



ì›¹ì„œë²„ë¥¼ êµ¬ê¸€firebaseì™€ Realtime Databaseë¥¼ ì—°ë™í•´ì„œ ì‚¬ìš©í•˜ê³ ìˆê³  ê¹ƒí—ˆë¸Œë„ ê°™ì´ ì‚¬ìš©ì¤‘ì¸ë°,  í…ŒìŠ¤íŠ¸ë¡œ ì§€ê¸ˆ ì½”ë“œë¥¼ ì‘ì„±ì¤‘ì¸ë°
ì…ë ¥ë°ì´íƒ€ë¥¼ DBì— ì „ì†¡í•´ì„œ ë§Œë“¤ì–´ì¡Œë‹¤ë©´ ë‚´ì»´í“¨í„°ì˜ ì–´ë””ì— ë°ì´íƒ€ì €ì¥ë˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì¤˜. ë‚˜ì˜ ì°©ê°ì¸ì§€ ëª¨ë¥´ê² ëŠ”ë°
ë¶„ëª…íˆ ì–´ì œ íšŒì›ë“±ë¡í•œ ì •ë³´ë¡œ ë¡œê·¸ì¸ì´ ë˜ì—ˆëŠ”ë° ì˜¤ëŠ˜ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ë‹ˆ ì—†ëŠ” ì •ë³´ë¼ê³  ë‚˜ì™€ì„œ ê·¸ë˜ìš”.
ì°¸ê³ ë¡œ ë‚´ì»´í“¨í„° ì½”ë“œìœ„ì¹˜ëŠ” C:\GitHub\terraone-site\public ì´ëë‹ˆë‹¤.







<!--  " cd C:\GitHub\terraone-site "    -->
<!-- ë°ì´íƒ€ìˆ˜ì •í›„ í™•ì¸í•´ë³´ë ¤ë©´ ë„ìŠ¤í”„ë¡¬í”„íŠ¸ì—ì„œ " firebase emulators:start " ì‹¤í–‰ -->
<!-- ë¸Œë¼ìš°ì €ì—ì„œ ex)  http://127.0.0.1:5000/login.html    -->
<!-- ë¸Œë¼ìš°ì €ì—ì„œ ex)  http://127.0.0.1:5000/signup.html    -->
<!-- ë¸Œë¼ìš°ì €ì—ì„œ ex)  http://127.0.0.1:5000/members.html    -->




êµ¬ê¸€ firebaseì›¹í˜ì´ì§€ì™€ Realtime Databaseì™€ ì—°ê²°ë˜ì–´ì„œ í˜„ì¬ ë‚´ì»´í“¨í„°ì—ì„œ íŒŒì¼ìœ„ì¹˜ëŠ” C:\GitHub\terraone-site\publicêµ¬ì¡°ë¡œ ë§Œë“¤ì–´ì ¸ìˆê³ , ë¡œê·¸ì¸, íšŒì›ê°€ì…, íšŒì›ë©¤ë²„ ë¶ˆëŸ¬ì˜¤ê¸°, ë°ì´íƒ€ìˆ˜ì •,ì‚­ì œë¥¼ í•˜ê¸°ìœ„í•´ ë§Œë“¤ì–´ì§„ ì½”ë“œì´ë‹¤. ì„¸ë¶€ì ìœ¼ë¡œëŠ” ë¡œê·¸ì¸==> login.html / login.js , íšŒì›ê°€ì…===> signup.html / signup.js
íšŒì›ì—´ëŒ===> members.html / members.js  , íšŒì›í¸ì§‘===> edit-member.html / edit-member.js ì™€ ì—°ê²°ì‹œì¼œë†“ì•˜ë‹¤. ì°¸ê³ ë¡œ
jsíŒŒì¼ì€ ./jsí´ë”ì•ˆì— ë“¤ì–´ê°€ìˆê³  cssì½”ë“œëŠ” css_firebaseí´ë”ì— ë“¤ì–´ìˆë‹¤. ë¬¸ì œê°€ ë˜ëŠ” ì§€ì ì€ ë¡œê·¸ì¸í•´ì„œ ë“¤ì–´ê°€ë©´ íšŒì›ëª©ë¡ì— ë°ì´íƒ€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ë¥¼ ëª»í•´ì„œ ê·¸ë˜ìš”.ë§Œë“¤ì–´ë†“ì€ ì½”ë“œê°€ ì´10ì—¬ê°œê°€ ë˜ëŠ”ë° í•œë‘ê°œì”© ë³´ë‚´ì¤„í…Œë‹ˆ ì½”ë“œë¶„ì„ì„í•´ì„œ ë¬¸ì œì ì„ ì°¾ì•„ì£¼ê¸°
ë°”ëë‹ˆë‹¤.

======================================
======================================

firebase-congig.js ì½”ë“œëŠ”, 
// ğŸ“ public/js/firebase-config.js
// Firebase ê¸°ë³¸ ì„¤ì • íŒŒì¼

// Firebase SDKì—ì„œ í•„ìš”í•œ í•¨ìˆ˜ import
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-analytics.js";

// Firebase í”„ë¡œì íŠ¸ ì„¤ì • ì •ë³´
const firebaseConfig = {
  apiKey: "AIzaSyAF7AD1d54k21-stmb0Hpg9OMEECvzFHpQ",
  authDomain: "terraone-d0318.firebaseapp.com",
  databaseURL: "https://terraone-d0318-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "terraone-d0318",
  storageBucket: "terraone-d0318.firebasestorage.app",
  messagingSenderId: "1082807340877",
  appId: "1:1082807340877:web:6e2b49c04562d800e87104",
  measurementId: "G-7HMJEV832S"
};

// Firebase ì•± ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ Firebase ì•±ì„ ì“¸ ìˆ˜ ìˆë„ë¡ export
export { app };

ì´ë ‡ê²Œ ë˜ì–´ìˆê³ ,


======================================
======================================

firebase-db.js ì½”ë“œëŠ”,
// ğŸ”¹ firebase-db.js (ìˆ˜ì • ë²„ì „)
import { app } from "./firebase-config.js";
import { getDatabase, ref, set, push, get, child, update, remove } 
  from "https://www.gstatic.com/firebasejs/10.6.0/firebase-database.js";


const db = getDatabase(app);
const membersRef = ref(db, "terraone/tel");

// âœ… íšŒì› ë“±ë¡ í•¨ìˆ˜
export function addMember(member) {
  push(membersRef, member)
    .then(() => console.log("âœ… ìƒˆ íšŒì› ë“±ë¡ ì™„ë£Œ"))
    .catch(err => console.error("âŒ ë“±ë¡ ì‹¤íŒ¨:", err));
}

// âœ… ì „ì²´ íšŒì› ê°€ì ¸ì˜¤ê¸°
export async function getAllMembers() {
  const snapshot = await get(membersRef);
  if (snapshot.exists()) {
    return snapshot.val();
  } else {
    return {};
  }
}

// âœ… íšŒì› ìˆ˜ì •
export function updateMember(memberKey, updatedData) {
  const memberRef = ref(db, `terraone/tel/${memberKey}`);
  update(memberRef, updatedData)
    .then(() => console.log("âœ… íšŒì› ìˆ˜ì • ì™„ë£Œ"))
    .catch(err => console.error("âŒ ìˆ˜ì • ì‹¤íŒ¨:", err));
}

// âœ… íšŒì› ì‚­ì œ
export function deleteMember(memberKey) {
  const memberRef = ref(db, `terraone/tel/${memberKey}`);
  remove(memberRef)
    .then(() => console.log("âœ… íšŒì› ì‚­ì œ ì™„ë£Œ"))
    .catch(err => console.error("âŒ ì‚­ì œ ì‹¤íŒ¨:", err));
}

// âœ… ë¡œê·¸ì¸ í•¨ìˆ˜
export async function login(id, password) {
  const allMembers = await getAllMembers();
  for (const key in allMembers) {
    const member = allMembers[key];
    if (member.id === id && member.password === password) {
      return { ...member, key };
    }
  }
  return null; // ë¡œê·¸ì¸ ì‹¤íŒ¨
}
ì´ë ‡ê²Œ ë˜ì–´ìˆë‹¤.


======================================
======================================


 css ì½”ë“œ(./css_firebase)
login.css ì½”ë“œëŠ”,
body {
  background: linear-gradient(135deg, #6f42c1, #6610f2);
  min-height: 100vh;
  font-family: 'Noto Sans KR', sans-serif;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card {
  border-radius: 1rem;
}

h2.card-title {
  font-weight: bold;
  color: #fff;
}

#message {
  font-weight: bold;
  color: #ffc107;
}


======================================
======================================

members.css ì½”ë“œëŠ”,
body {
  background: linear-gradient(135deg, #6f42c1, #6610f2);
  min-height: 100vh;
  color: #fff;
  font-family: 'Noto Sans KR', sans-serif;
}

h2 {
  font-weight: bold;
  color: #fff;
}

.table {
  background-color: #fff;
  color: #000;
  border-radius: 1rem;
  overflow: hidden;
}

.table thead.table-dark th {
  background-color: #343a40;
  color: #fff;
}

.btn-warning {
  margin-right: 5px;
}

#message {
  font-weight: bold;
  color: #ffc107;
}


======================================
======================================

signup.css ì½”ë“œëŠ”,
body {
  background: linear-gradient(135deg, #6f42c1, #6610f2);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card {
  border-radius: 1rem;
}

h2.card-title {
  font-weight: bold;
  color: #343a40;
}

#message {
  font-weight: bold;
  color: green;
}
